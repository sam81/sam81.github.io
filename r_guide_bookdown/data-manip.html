<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Data Types and Data Manipulation | A R Guide</title>
  <meta name="description" content="A guide for the R programming language." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Data Types and Data Manipulation | A R Guide" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A guide for the R programming language." />
  <meta name="github-repo" content="sam81/rguide" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Data Types and Data Manipulation | A R Guide" />
  
  <meta name="twitter:description" content="A guide for the R programming language." />
  

<meta name="author" content="Samuele Carcagno" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="organising-a-working-session.html"/>
<link rel="next" href="visualising-your-data.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./preface.html">A R Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Installing R</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#installing-the-base-program"><i class="fa fa-check"></i><b>1.1</b> Installing the Base Program</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#gnulinux-and-other-unices"><i class="fa fa-check"></i><b>1.1.1</b> GNU/Linux and Other Unices</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro.html"><a href="intro.html#windows"><i class="fa fa-check"></i><b>1.1.2</b> Windows</a></li>
<li class="chapter" data-level="1.1.3" data-path="intro.html"><a href="intro.html#mac-os-x"><i class="fa fa-check"></i><b>1.1.3</b> Mac Os X</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#installing-add-on-packages"><i class="fa fa-check"></i><b>1.2</b> Installing Add-On Packages</a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#gnulinux-and-other-unices-1"><i class="fa fa-check"></i><b>1.2.1</b> GNU/Linux and Other Unices</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro.html"><a href="intro.html#windows-1"><i class="fa fa-check"></i><b>1.2.2</b> Windows</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html"><i class="fa fa-check"></i><b>2</b> A Simple Introduction to R</a><ul>
<li class="chapter" data-level="2.1" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#datasets"><i class="fa fa-check"></i><b>2.1</b> Datasets</a></li>
<li class="chapter" data-level="2.2" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#firing-up-and-quitting-r"><i class="fa fa-check"></i><b>2.2</b> Firing up and Quitting R</a></li>
<li class="chapter" data-level="2.3" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#starting-to-work-with-r"><i class="fa fa-check"></i><b>2.3</b> Starting to Work with R</a></li>
<li class="chapter" data-level="2.4" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#gettinghelp"><i class="fa fa-check"></i><b>2.4</b> Getting Help</a><ul>
<li class="chapter" data-level="2.4.1" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#the-online-help-system"><i class="fa fa-check"></i><b>2.4.1</b> The Online Help System</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#gui"><i class="fa fa-check"></i><b>2.5</b> Working with a Graphical User Interface</a><ul>
<li class="chapter" data-level="2.5.1" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#r-studio"><i class="fa fa-check"></i><b>2.5.1</b> R Studio</a></li>
<li class="chapter" data-level="2.5.2" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#the-r-commander"><i class="fa fa-check"></i><b>2.5.2</b> The R Commander</a></li>
<li class="chapter" data-level="2.5.3" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#jgr"><i class="fa fa-check"></i><b>2.5.3</b> JGR</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="organising-a-working-session.html"><a href="organising-a-working-session.html"><i class="fa fa-check"></i><b>3</b> Organising a Working Session</a><ul>
<li class="chapter" data-level="3.1" data-path="organising-a-working-session.html"><a href="organising-a-working-session.html#setting-and-changing-the-working-directory"><i class="fa fa-check"></i><b>3.1</b> Setting and Changing the Working Directory</a></li>
<li class="chapter" data-level="3.2" data-path="organising-a-working-session.html"><a href="organising-a-working-session.html#objects"><i class="fa fa-check"></i><b>3.2</b> Objects</a></li>
<li class="chapter" data-level="3.3" data-path="organising-a-working-session.html"><a href="organising-a-working-session.html#saving-and-using-the-workspace-image"><i class="fa fa-check"></i><b>3.3</b> Saving and Using the “Workspace Image”</a></li>
<li class="chapter" data-level="3.4" data-path="organising-a-working-session.html"><a href="organising-a-working-session.html#working-in-batch-mode"><i class="fa fa-check"></i><b>3.4</b> Working in Batch Mode</a><ul>
<li class="chapter" data-level="3.4.1" data-path="organising-a-working-session.html"><a href="organising-a-working-session.html#executing-commands-written-in-a-file-from-an-r-session"><i class="fa fa-check"></i><b>3.4.1</b> Executing commands written in a file from an R session</a></li>
<li class="chapter" data-level="3.4.2" data-path="organising-a-working-session.html"><a href="organising-a-working-session.html#executing-commands-written-in-a-file-from-a-shell"><i class="fa fa-check"></i><b>3.4.2</b> Executing commands written in a file from a shell</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-manip.html"><a href="data-manip.html"><i class="fa fa-check"></i><b>4</b> Data Types and Data Manipulation</a><ul>
<li class="chapter" data-level="4.1" data-path="data-manip.html"><a href="data-manip.html#vectors"><i class="fa fa-check"></i><b>4.1</b> Vectors</a></li>
<li class="chapter" data-level="4.2" data-path="data-manip.html"><a href="data-manip.html#indexing-vectors"><i class="fa fa-check"></i><b>4.2</b> Indexing Vectors</a><ul>
<li class="chapter" data-level="4.2.1" data-path="data-manip.html"><a href="data-manip.html#the-seq-function"><i class="fa fa-check"></i><b>4.2.1</b> The <code>seq</code> Function</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-manip.html"><a href="data-manip.html#the-rep-function"><i class="fa fa-check"></i><b>4.2.2</b> The <code>rep</code> function</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-manip.html"><a href="data-manip.html#matrix-facilities"><i class="fa fa-check"></i><b>4.3</b> Matrix Facilities</a><ul>
<li class="chapter" data-level="4.3.1" data-path="data-manip.html"><a href="data-manip.html#matrix-operations"><i class="fa fa-check"></i><b>4.3.1</b> Matrix Operations</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-manip.html"><a href="data-manip.html#Lists"><i class="fa fa-check"></i><b>4.4</b> Lists</a></li>
<li class="chapter" data-level="4.5" data-path="data-manip.html"><a href="data-manip.html#dataframes"><i class="fa fa-check"></i><b>4.5</b> Dataframes</a><ul>
<li class="chapter" data-level="4.5.1" data-path="data-manip.html"><a href="data-manip.html#accessing-parts-of-a-dataframe"><i class="fa fa-check"></i><b>4.5.1</b> Accessing Parts of a Dataframe</a></li>
<li class="chapter" data-level="4.5.2" data-path="data-manip.html"><a href="data-manip.html#change-the-names-of-variables-in-a-dataframe"><i class="fa fa-check"></i><b>4.5.2</b> Change the Names of Variables in a Dataframe</a></li>
<li class="chapter" data-level="4.5.3" data-path="data-manip.html"><a href="data-manip.html#other-ways-to-subset-a-dataframe"><i class="fa fa-check"></i><b>4.5.3</b> Other Ways to Subset a Dataframe</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="data-manip.html"><a href="data-manip.html#factors"><i class="fa fa-check"></i><b>4.6</b> Factors</a><ul>
<li class="chapter" data-level="4.6.1" data-path="data-manip.html"><a href="data-manip.html#renaming-the-levels-of-a-factor"><i class="fa fa-check"></i><b>4.6.1</b> Renaming the levels of a factor</a></li>
<li class="chapter" data-level="4.6.2" data-path="data-manip.html"><a href="data-manip.html#gl"><i class="fa fa-check"></i><b>4.6.2</b> Creating Factors with <code>gl</code></a></li>
<li class="chapter" data-level="4.6.3" data-path="data-manip.html"><a href="data-manip.html#natural-sort-order-for-character-and-factor-vectors"><i class="fa fa-check"></i><b>4.6.3</b> Natural sort order for character and factor vectors</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="data-manip.html"><a href="data-manip.html#getting-info-on-r-objects"><i class="fa fa-check"></i><b>4.7</b> Getting Info on R Objects</a></li>
<li class="chapter" data-level="4.8" data-path="data-manip.html"><a href="data-manip.html#changing-the-format-of-your-data"><i class="fa fa-check"></i><b>4.8</b> Changing the Format of Your Data</a><ul>
<li class="chapter" data-level="4.8.1" data-path="data-manip.html"><a href="data-manip.html#the-one-row-per-observation-format"><i class="fa fa-check"></i><b>4.8.1</b> The “One Row per Observation” Format</a></li>
<li class="chapter" data-level="4.8.2" data-path="data-manip.html"><a href="data-manip.html#stack"><i class="fa fa-check"></i><b>4.8.2</b> The <code>stack</code> and <code>unstack</code> functions</a></li>
<li class="chapter" data-level="4.8.3" data-path="data-manip.html"><a href="data-manip.html#tapply"><i class="fa fa-check"></i><b>4.8.3</b> The <code>tapply</code> and <code>aggregate</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="data-manip.html"><a href="data-manip.html#creating-and-editing-data-objects-through-a-visual-interface"><i class="fa fa-check"></i><b>4.9</b> Creating and Editing Data Objects through a Visual Interface</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="visualising-your-data.html"><a href="visualising-your-data.html"><i class="fa fa-check"></i><b>5</b> Visualising Your Data</a><ul>
<li class="chapter" data-level="5.1" data-path="visualising-your-data.html"><a href="visualising-your-data.html#reading-numbers-in-exponential-notation"><i class="fa fa-check"></i><b>5.1</b> Reading Numbers in Exponential Notation</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="IO.html"><a href="IO.html"><i class="fa fa-check"></i><b>6</b> File Input/Output</a><ul>
<li class="chapter" data-level="6.1" data-path="IO.html"><a href="IO.html#reading-in-data-from-a-file"><i class="fa fa-check"></i><b>6.1</b> Reading In Data from a File</a><ul>
<li class="chapter" data-level="6.1.1" data-path="IO.html"><a href="IO.html#read.table"><i class="fa fa-check"></i><b>6.1.1</b> The <code>read.table</code> function</a></li>
<li class="chapter" data-level="6.1.2" data-path="IO.html"><a href="IO.html#scan"><i class="fa fa-check"></i><b>6.1.2</b> <code>scan</code></a></li>
<li class="chapter" data-level="6.1.3" data-path="IO.html"><a href="IO.html#low-level-file-input"><i class="fa fa-check"></i><b>6.1.3</b> Low-Level File Input</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="IO.html"><a href="IO.html#writing-data-to-a-file"><i class="fa fa-check"></i><b>6.2</b> Writing Data to a file</a><ul>
<li class="chapter" data-level="6.2.1" data-path="IO.html"><a href="IO.html#write.table"><i class="fa fa-check"></i><b>6.2.1</b> The <code>write.table</code> function</a></li>
<li class="chapter" data-level="6.2.2" data-path="IO.html"><a href="IO.html#cat"><i class="fa fa-check"></i><b>6.2.2</b> Low-Level File Output</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="descriptive.html"><a href="descriptive.html"><i class="fa fa-check"></i><b>7</b> Descriptive</a><ul>
<li class="chapter" data-level="7.1" data-path="descriptive.html"><a href="descriptive.html#tables"><i class="fa fa-check"></i><b>7.1</b> Tables</a></li>
<li class="chapter" data-level="7.2" data-path="descriptive.html"><a href="descriptive.html#the-scale-function"><i class="fa fa-check"></i><b>7.2</b> The <code>scale</code> Function</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="graphics.html"><a href="graphics.html"><i class="fa fa-check"></i><b>8</b> Graphics</a><ul>
<li class="chapter" data-level="8.1" data-path="graphics.html"><a href="graphics.html#overview-of-r-base-graphics-functions"><i class="fa fa-check"></i><b>8.1</b> Overview of R base graphics functions</a></li>
<li class="chapter" data-level="8.2" data-path="graphics.html"><a href="graphics.html#plot"><i class="fa fa-check"></i><b>8.2</b> The <code>plot</code> Function</a></li>
<li class="chapter" data-level="8.3" data-path="graphics.html"><a href="graphics.html#drawing-functions"><i class="fa fa-check"></i><b>8.3</b> Drawing Functions</a><ul>
<li class="chapter" data-level="8.3.1" data-path="graphics.html"><a href="graphics.html#the-matplot-function"><i class="fa fa-check"></i><b>8.3.1</b> The <code>matplot</code> function</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="graphics.html"><a href="graphics.html#barplots"><i class="fa fa-check"></i><b>8.4</b> Barplots</a><ul>
<li class="chapter" data-level="8.4.1" data-path="graphics.html"><a href="graphics.html#barplots-with-error-bars"><i class="fa fa-check"></i><b>8.4.1</b> Barplots with Error Bars</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="graphics.html"><a href="graphics.html#boxplots"><i class="fa fa-check"></i><b>8.5</b> Boxplots</a></li>
<li class="chapter" data-level="8.6" data-path="graphics.html"><a href="graphics.html#histograms"><i class="fa fa-check"></i><b>8.6</b> Histograms</a></li>
<li class="chapter" data-level="8.7" data-path="graphics.html"><a href="graphics.html#stripcharts"><i class="fa fa-check"></i><b>8.7</b> Stripcharts</a></li>
<li class="chapter" data-level="8.8" data-path="graphics.html"><a href="graphics.html#interaction-plots"><i class="fa fa-check"></i><b>8.8</b> Interaction Plots</a></li>
<li class="chapter" data-level="8.9" data-path="graphics.html"><a href="graphics.html#par"><i class="fa fa-check"></i><b>8.9</b> Setting Graphics Parameters</a><ul>
<li class="chapter" data-level="8.9.1" data-path="graphics.html"><a href="graphics.html#lty"><i class="fa fa-check"></i><b>8.9.1</b> Line type with the <code>lty</code> parameter</a></li>
<li class="chapter" data-level="8.9.2" data-path="graphics.html"><a href="graphics.html#secpch"><i class="fa fa-check"></i><b>8.9.2</b> Symbols with the <code>pch</code> parameter</a></li>
<li class="chapter" data-level="8.9.3" data-path="graphics.html"><a href="graphics.html#fonts"><i class="fa fa-check"></i><b>8.9.3</b> Fonts</a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="graphics.html"><a href="graphics.html#adding-elements-to-a-plot"><i class="fa fa-check"></i><b>8.10</b> Adding Elements to a Plot</a><ul>
<li class="chapter" data-level="8.10.1" data-path="graphics.html"><a href="graphics.html#legend"><i class="fa fa-check"></i><b>8.10.1</b> Adding a Legend</a></li>
<li class="chapter" data-level="8.10.2" data-path="graphics.html"><a href="graphics.html#adding-text"><i class="fa fa-check"></i><b>8.10.2</b> Adding Text</a></li>
<li class="chapter" data-level="8.10.3" data-path="graphics.html"><a href="graphics.html#addgrid"><i class="fa fa-check"></i><b>8.10.3</b> Adding a Grid</a></li>
<li class="chapter" data-level="8.10.4" data-path="graphics.html"><a href="graphics.html#axes"><i class="fa fa-check"></i><b>8.10.4</b> Setting the Axes</a></li>
</ul></li>
<li class="chapter" data-level="8.11" data-path="graphics.html"><a href="graphics.html#creating-layouts-for-multiple-graphs-glayout"><i class="fa fa-check"></i><b>8.11</b> Creating Layouts for Multiple Graphs {glayout}</a><ul>
<li class="chapter" data-level="8.11.1" data-path="graphics.html"><a href="graphics.html#mfrow-and-mfcol-mfrowmfcol"><i class="fa fa-check"></i><b>8.11.1</b> mfrow and mfcol {mfrowmfcol}</a></li>
<li class="chapter" data-level="8.11.2" data-path="graphics.html"><a href="graphics.html#layout"><i class="fa fa-check"></i><b>8.11.2</b> layout</a></li>
</ul></li>
<li class="chapter" data-level="8.12" data-path="graphics.html"><a href="graphics.html#graphics-device-regions-and-coordinates"><i class="fa fa-check"></i><b>8.12</b> Graphics Device Regions and Coordinates</a></li>
<li class="chapter" data-level="8.13" data-path="graphics.html"><a href="graphics.html#plotfromscratch"><i class="fa fa-check"></i><b>8.13</b> Plotting from Scratch</a></li>
<li class="chapter" data-level="8.14" data-path="graphics.html"><a href="graphics.html#colours-for-graphics"><i class="fa fa-check"></i><b>8.14</b> Colours for Graphics</a><ul>
<li class="chapter" data-level="8.14.1" data-path="graphics.html"><a href="graphics.html#colour-opacity"><i class="fa fa-check"></i><b>8.14.1</b> Colour Opacity</a></li>
</ul></li>
<li class="chapter" data-level="8.15" data-path="graphics.html"><a href="graphics.html#managing-graphic-devices"><i class="fa fa-check"></i><b>8.15</b> Managing Graphic Devices</a><ul>
<li class="chapter" data-level="8.15.1" data-path="graphics.html"><a href="graphics.html#opening-another-graphics-window"><i class="fa fa-check"></i><b>8.15.1</b> Opening Another Graphics Window</a></li>
<li class="chapter" data-level="8.15.2" data-path="graphics.html"><a href="graphics.html#exporting-graphics"><i class="fa fa-check"></i><b>8.15.2</b> Exporting Graphics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>9</b> ggplot2</a><ul>
<li class="chapter" data-level="9.0.1" data-path="ggplot2.html"><a href="ggplot2.html#log-axis-with-pretty-tickmarks"><i class="fa fa-check"></i><b>9.0.1</b> Log axis with pretty tickmarks</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="plotly.html"><a href="plotly.html"><i class="fa fa-check"></i><b>10</b> Plotly</a><ul>
<li class="chapter" data-level="10.1" data-path="plotly.html"><a href="plotly.html#using-plotly-with-knitr"><i class="fa fa-check"></i><b>10.1</b> Using plotly with knitr</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="lattice.html"><a href="lattice.html"><i class="fa fa-check"></i><b>11</b> Lattice Graphics</a><ul>
<li class="chapter" data-level="11.1" data-path="lattice.html"><a href="lattice.html#overview-of-lattice-graphics"><i class="fa fa-check"></i><b>11.1</b> Overview of Lattice Graphics</a></li>
<li class="chapter" data-level="11.2" data-path="lattice.html"><a href="lattice.html#introduction-to-model-formulae-and-multi-panel-conditioning"><i class="fa fa-check"></i><b>11.2</b> Introduction to model formulae and multi-panel conditioning</a></li>
<li class="chapter" data-level="11.3" data-path="lattice.html"><a href="lattice.html#barchart"><i class="fa fa-check"></i><b>11.3</b> <code>barchart</code></a></li>
<li class="chapter" data-level="11.4" data-path="lattice.html"><a href="lattice.html#dotplot"><i class="fa fa-check"></i><b>11.4</b> dotplot</a></li>
<li class="chapter" data-level="11.5" data-path="lattice.html"><a href="lattice.html#histogram"><i class="fa fa-check"></i><b>11.5</b> histogram</a></li>
<li class="chapter" data-level="11.6" data-path="lattice.html"><a href="lattice.html#interaction-plots-1"><i class="fa fa-check"></i><b>11.6</b> Interaction Plots</a></li>
<li class="chapter" data-level="11.7" data-path="lattice.html"><a href="lattice.html#customizingtrellis"><i class="fa fa-check"></i><b>11.7</b> Customising Lattice Graphics</a><ul>
<li class="chapter" data-level="11.7.1" data-path="lattice.html"><a href="lattice.html#textual-elements"><i class="fa fa-check"></i><b>11.7.1</b> Textual Elements</a></li>
<li class="chapter" data-level="11.7.2" data-path="lattice.html"><a href="lattice.html#log-axis-with-pretty-tickmarks-1"><i class="fa fa-check"></i><b>11.7.2</b> Log axis with pretty tickmarks</a></li>
</ul></li>
<li class="chapter" data-level="11.8" data-path="lattice.html"><a href="lattice.html#trellispanel"><i class="fa fa-check"></i><b>11.8</b> Writing Panel Functions</a><ul>
<li class="chapter" data-level="11.8.1" data-path="lattice.html"><a href="lattice.html#combining-panel-functions"><i class="fa fa-check"></i><b>11.8.1</b> Combining Panel Functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="graphics-labels-and-text.html"><a href="graphics-labels-and-text.html"><i class="fa fa-check"></i><b>12</b> Graphics labels and text</a><ul>
<li class="chapter" data-level="12.1" data-path="graphics-labels-and-text.html"><a href="graphics-labels-and-text.html#mathematical-expressions-and-variables"><i class="fa fa-check"></i><b>12.1</b> Mathematical expressions and variables</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="probability-distribution-functions.html"><a href="probability-distribution-functions.html"><i class="fa fa-check"></i><b>13</b> Probability Distribution Functions</a><ul>
<li class="chapter" data-level="13.1" data-path="probability-distribution-functions.html"><a href="probability-distribution-functions.html#bernoulli"><i class="fa fa-check"></i><b>13.1</b> The Bernoulli distribution</a></li>
<li class="chapter" data-level="13.2" data-path="probability-distribution-functions.html"><a href="probability-distribution-functions.html#binomial"><i class="fa fa-check"></i><b>13.2</b> The binomial distribution</a></li>
<li class="chapter" data-level="13.3" data-path="probability-distribution-functions.html"><a href="probability-distribution-functions.html#normal"><i class="fa fa-check"></i><b>13.3</b> The normal distribution</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html"><i class="fa fa-check"></i><b>14</b> Hypothesis Testing</a><ul>
<li class="chapter" data-level="14.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#chi2-test"><i class="fa fa-check"></i><b>14.1</b> <span class="math inline">\(\chi^2\)</span> test</a><ul>
<li class="chapter" data-level="14.1.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#testing-hypotheses-about-the-distribution-of-a-categorical-variable"><i class="fa fa-check"></i><b>14.1.1</b> Testing Hypotheses about the Distribution of a Categorical Variable</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#students-t-test"><i class="fa fa-check"></i><b>14.2</b> Student’s <em>t</em> test</a><ul>
<li class="chapter" data-level="14.2.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#one-sample-t-test"><i class="fa fa-check"></i><b>14.2.1</b> One sample <em>t</em>-test</a></li>
<li class="chapter" data-level="14.2.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#two-samples-t-test"><i class="fa fa-check"></i><b>14.2.2</b> Two samples t-test</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#the-levene-test-for-homogeneity-of-variances"><i class="fa fa-check"></i><b>14.3</b> The Levene Test for Homogeneity of Variances</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html"><i class="fa fa-check"></i><b>15</b> Correlation and Regression</a><ul>
<li class="chapter" data-level="15.1" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#linear-regression"><i class="fa fa-check"></i><b>15.1</b> Linear Regression</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="anova.html"><a href="anova.html"><i class="fa fa-check"></i><b>16</b> ANOVA</a><ul>
<li class="chapter" data-level="16.1" data-path="anova.html"><a href="anova.html#one-way-anova"><i class="fa fa-check"></i><b>16.1</b> One-Way ANOVA</a></li>
<li class="chapter" data-level="16.2" data-path="anova.html"><a href="anova.html#repeated-measures-anova"><i class="fa fa-check"></i><b>16.2</b> Repeated Measures ANOVA</a><ul>
<li class="chapter" data-level="16.2.1" data-path="anova.html"><a href="anova.html#one-within-subjects-factor"><i class="fa fa-check"></i><b>16.2.1</b> One Within Subjects Factor</a></li>
<li class="chapter" data-level="16.2.2" data-path="anova.html"><a href="anova.html#two-within-subjects-factors"><i class="fa fa-check"></i><b>16.2.2</b> Two Within Subjects Factors</a></li>
<li class="chapter" data-level="16.2.3" data-path="anova.html"><a href="anova.html#two-within-subjects-factors-and-one-between"><i class="fa fa-check"></i><b>16.2.3</b> Two Within Subjects Factors and One Between</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="how-to-adjust-the-p-values-for-multiple-comparisons.html"><a href="how-to-adjust-the-p-values-for-multiple-comparisons.html"><i class="fa fa-check"></i><b>17</b> How to Adjust the p-values for Multiple Comparisons</a></li>
<li class="chapter" data-level="18" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>18</b> R Programming</a><ul>
<li class="chapter" data-level="18.1" data-path="programming.html"><a href="programming.html#contrstruct"><i class="fa fa-check"></i><b>18.1</b> Control Structures</a></li>
<li class="chapter" data-level="18.2" data-path="programming.html"><a href="programming.html#stringprocessing"><i class="fa fa-check"></i><b>18.2</b> String Processing</a><ul>
<li class="chapter" data-level="18.2.1" data-path="programming.html"><a href="programming.html#regexp"><i class="fa fa-check"></i><b>18.2.1</b> Using Regular Expressions</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="programming.html"><a href="programming.html#tips-and-tricks"><i class="fa fa-check"></i><b>18.3</b> Tips and Tricks</a><ul>
<li class="chapter" data-level="18.3.1" data-path="programming.html"><a href="programming.html#convert-a-string-into-a-command"><i class="fa fa-check"></i><b>18.3.1</b> Convert a String into a Command</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="programming.html"><a href="programming.html#creatingsimplerpackages"><i class="fa fa-check"></i><b>18.4</b> Creating Simple R Packages</a><ul>
<li class="chapter" data-level="18.4.1" data-path="programming.html"><a href="programming.html#the-bare-minimum-to-create-a-package"><i class="fa fa-check"></i><b>18.4.1</b> The Bare Minimum to Create a Package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="custom.html"><a href="custom.html"><i class="fa fa-check"></i><b>19</b> Environment Customisation</a></li>
<li class="chapter" data-level="20" data-path="ess-using-emacs-speaks-statistics-with-r.html"><a href="ess-using-emacs-speaks-statistics-with-r.html"><i class="fa fa-check"></i><b>20</b> ESS: Using Emacs Speaks Statistics with R</a><ul>
<li class="chapter" data-level="20.1" data-path="ess-using-emacs-speaks-statistics-with-r.html"><a href="ess-using-emacs-speaks-statistics-with-r.html#using-ess-for-editing-and-debugging-r-source-files"><i class="fa fa-check"></i><b>20.1</b> Using ESS for Editing and Debugging R Source Files</a></li>
<li class="chapter" data-level="20.2" data-path="ess-using-emacs-speaks-statistics-with-r.html"><a href="ess-using-emacs-speaks-statistics-with-r.html#using-ess-to-interact-with-a-r-process"><i class="fa fa-check"></i><b>20.2</b> Using ESS to Interact with a R Process</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="using-sweave-to-write-documents-with-r-and-latex.html"><a href="using-sweave-to-write-documents-with-r-and-latex.html"><i class="fa fa-check"></i><b>21</b> Using Sweave to Write Documents with R and LaTeX</a><ul>
<li class="chapter" data-level="21.1" data-path="using-sweave-to-write-documents-with-r-and-latex.html"><a href="using-sweave-to-write-documents-with-r-and-latex.html#whats-sweave"><i class="fa fa-check"></i><b>21.1</b> What’s Sweave?</a></li>
<li class="chapter" data-level="21.2" data-path="using-sweave-to-write-documents-with-r-and-latex.html"><a href="using-sweave-to-write-documents-with-r-and-latex.html#usage"><i class="fa fa-check"></i><b>21.2</b> Usage</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="soundprocessing.html"><a href="soundprocessing.html"><i class="fa fa-check"></i><b>22</b> Sound Processing</a><ul>
<li class="chapter" data-level="22.1" data-path="soundprocessing.html"><a href="soundprocessing.html#libraries-for-sound-analysis-and-signal-processing"><i class="fa fa-check"></i><b>22.1</b> Libraries for Sound Analysis and Signal Processing</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="partial-list-of-packages-by-category.html"><a href="partial-list-of-packages-by-category.html"><i class="fa fa-check"></i><b>A</b> Partial List of Packages by Category</a><ul>
<li class="chapter" data-level="A.1" data-path="partial-list-of-packages-by-category.html"><a href="partial-list-of-packages-by-category.html#graphics-packages"><i class="fa fa-check"></i><b>A.1</b> Graphics Packages</a></li>
<li class="chapter" data-level="A.2" data-path="partial-list-of-packages-by-category.html"><a href="partial-list-of-packages-by-category.html#gui-packages"><i class="fa fa-check"></i><b>A.2</b> GUI Packages</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="miscellaneous-commands.html"><a href="miscellaneous-commands.html"><i class="fa fa-check"></i><b>B</b> Miscellaneous commands</a></li>
<li class="chapter" data-level="C" data-path="other-manuals-and-sources-of-information-on-r.html"><a href="other-manuals-and-sources-of-information-on-r.html"><i class="fa fa-check"></i><b>C</b> Other Manuals and Sources of Information on R</a><ul>
<li class="chapter" data-level="C.0.1" data-path="other-manuals-and-sources-of-information-on-r.html"><a href="other-manuals-and-sources-of-information-on-r.html#in-italian"><i class="fa fa-check"></i><b>C.0.1</b> In Italian</a></li>
<li class="chapter" data-level="C.1" data-path="other-manuals-and-sources-of-information-on-r.html"><a href="other-manuals-and-sources-of-information-on-r.html#other-useful-statistics-resources"><i class="fa fa-check"></i><b>C.1</b> Other useful statistics resources</a><ul>
<li class="chapter" data-level="C.1.1" data-path="other-manuals-and-sources-of-information-on-r.html"><a href="other-manuals-and-sources-of-information-on-r.html#in-italian-1"><i class="fa fa-check"></i><b>C.1.1</b> In Italian</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="D" data-path="fullcoltable.html"><a href="fullcoltable.html"><i class="fa fa-check"></i><b>D</b> Full Colours Table</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A R Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data_manip" class="section level1">
<h1><span class="header-section-number">4</span> Data Types and Data Manipulation</h1>
<div id="vectors" class="section level2">
<h2><span class="header-section-number">4.1</span> Vectors</h2>
<p>One of the simplest and among the most important data types in R is the vector, which can be numerical or containing strings of characters. A simple way to build a vector is through the <code>c</code> function, which concatenates a series of data, for example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">temperature =<span class="st"> </span><span class="kw">c</span>(<span class="dv">34</span>, <span class="dv">45</span>, <span class="dv">23</span>, <span class="dv">29</span>, <span class="dv">26</span>, <span class="dv">31</span>, <span class="dv">44</span>, <span class="dv">32</span>, <span class="dv">19</span>, <span class="dv">22</span>, <span class="dv">34</span>)</code></pre></div>
<p>in this case <code>c</code> concatenates a series of numerical data into a vector and the assignment operator <code>=</code> assigns it to the variable “temperature”, so that it can be retrieved later. Once the variable is created you can apply functions to it, for example</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(temperature)</code></pre></div>
<pre><code>## [1] 30.81818</code></pre>
<p>will compute the mean of the data vector. If you want to save the result of this function, you just have to assign it to another object</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mean_temp =<span class="st"> </span><span class="kw">mean</span>(temperature)</code></pre></div>
<p>notice that in this case the value is assigned to the object <code>mean_temp</code> but it is not printed, you can display it with</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(mean_temp)</code></pre></div>
<pre><code>## [1] 30.81818</code></pre>
<p>or for short, just calling the object</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mean_temp</code></pre></div>
<pre><code>## [1] 30.81818</code></pre>
<p>You can also perform simple arithmetic operations on a vector, for example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">temperature <span class="op">+</span><span class="st"> </span><span class="dv">10</span></code></pre></div>
<pre><code>##  [1] 44 55 33 39 36 41 54 42 29 32 44</code></pre>
<p>will add 10 to each element of the vector.</p>
<p>You can also build vectors of characters, quoting each element of the vector</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">colour =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;blue&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;red&quot;</span> )</code></pre></div>
<p>The <code>length</code> function is used to access the number of element present in a vector</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(colour)</code></pre></div>
<pre><code>## [1] 3</code></pre>
</div>
<div id="indexing-vectors" class="section level2">
<h2><span class="header-section-number">4.2</span> Indexing Vectors</h2>
<p>It is possible to access only subsets of data in a vector and also assign them to another vector. The most basic form of indexing is based on the position of the data in the vector. For example, to access only the datum in the third position of a vector called temperature, you would simply type:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">temperature[<span class="dv">3</span>]</code></pre></div>
<pre><code>## [1] 23</code></pre>
<p>if you would like to access the data in more than one position of the vector, let’s say the first, the third and the sixth, you can again use the function concatenate inside the indexing command:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">temperature[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">6</span>)]</code></pre></div>
<pre><code>## [1] 34 23 31</code></pre>
<p>to access the data from, say, the third position to the tenth position you can use:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">temperature[<span class="dv">3</span><span class="op">:</span><span class="dv">10</span>]</code></pre></div>
<pre><code>## [1] 23 29 26 31 44 32 19 22</code></pre>
<p>and if you want to assign this subset to another vector called <code>&quot;white&quot;</code>, you can just type:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">white =<span class="st"> </span>temperature[<span class="dv">3</span><span class="op">:</span><span class="dv">10</span>]</code></pre></div>
<p>if you want to access all the vector but the first five positions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">temperature[<span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)]</code></pre></div>
<pre><code>## [1] 31 44 32 19 22 34</code></pre>
<p>since in R there is not a “delete” command, you can use this form of subsetting to remove elements of a vector, for example, if you would like to cancel the fourth element of the <code>temperature</code> vector you would write:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">temperature =<span class="st"> </span>temperature[<span class="op">-</span><span class="dv">4</span>]</code></pre></div>
<p>Furthermore, to access subsets of data you can do much more magic using logical operators (see Table <a href="data-manip.html#tab:logicalops">4.1</a>) and other tricks, for example if you want to access in a vector only the data greater than a certain value, you can use the <code>&gt;</code> (greater than) logical operator:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">temperature[temperature<span class="op">&gt;</span><span class="dv">30</span>]</code></pre></div>
<pre><code>## [1] 34 45 31 44 32 34</code></pre>
<p>In order to concatenate logical commands, you can use the &amp; (and) logical operator:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">temperature[temperature<span class="op">&gt;</span><span class="dv">30</span> <span class="op">&amp;</span><span class="st"> </span>temperature<span class="op">&lt;</span><span class="dv">35</span>]</code></pre></div>
<pre><code>## [1] 34 31 32 34</code></pre>
<table>
<caption><span id="tab:logicalops">Table 4.1: </span> Logical Operators.</caption>
<thead>
<tr class="header">
<th>Operator</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&amp;</code></td>
<td align="left">Intersection (“and”)</td>
</tr>
<tr class="even">
<td><code>&amp;&amp;</code></td>
<td align="left">“and” (lazy evaluation)</td>
</tr>
<tr class="odd">
<td><code>|</code></td>
<td align="left">Union (“or”)</td>
</tr>
<tr class="even">
<td><code>||</code></td>
<td align="left">“or” (lazy evaluation)</td>
</tr>
<tr class="odd">
<td><code>!</code></td>
<td align="left">Negation</td>
</tr>
<tr class="even">
<td><code>xor</code> ex</td>
<td align="left">clusive “or”</td>
</tr>
<tr class="odd">
<td><code>isTRUE(x)</code></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<table>
<caption><span id="tab:relationalops">Table 4.2: </span> Relational Operators.</caption>
<thead>
<tr class="header">
<th>Operator</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;</code></td>
<td align="left">Less than</td>
</tr>
<tr class="even">
<td><code>&lt;=</code></td>
<td align="left">Less than or equal to</td>
</tr>
<tr class="odd">
<td><code>&gt;</code></td>
<td align="left">Greater than</td>
</tr>
<tr class="even">
<td><code>&gt;=</code></td>
<td align="left">Greater than or equal to</td>
</tr>
<tr class="odd">
<td><code>==</code></td>
<td align="left">Equal to</td>
</tr>
<tr class="even">
<td><code>!=</code></td>
<td align="left">Not equal to</td>
</tr>
</tbody>
</table>
<p>It is also possible to apply labels to the positions of a vector, and then access the datum in a given position through its label:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">temperature =<span class="st"> </span><span class="kw">c</span>(<span class="dv">34</span>, <span class="dv">45</span>, <span class="dv">23</span>, <span class="dv">29</span>, <span class="dv">26</span>)
<span class="kw">names</span>(temperature) =<span class="kw">c</span>(<span class="st">&quot;Johnny&quot;</span>, <span class="st">&quot;Jack&quot;</span>, <span class="st">&quot;Tony&quot;</span>, <span class="st">&quot;Pippo&quot;</span>, <span class="st">&quot;Linda&quot;</span>)
temperature[<span class="st">&quot;Tony&quot;</span>]</code></pre></div>
<pre><code>## Tony 
##   23</code></pre>
<div id="the-seq-function" class="section level3">
<h3><span class="header-section-number">4.2.1</span> The <code>seq</code> Function</h3>
<p>The <code>seq</code> function can be used to create evenly spaced sequences of numbers</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>)</code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>the default increment is 1, but you can change it with the option <code>by</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">1</span>, <span class="fl">1.9</span>, <span class="dt">by=</span><span class="fl">0.1</span>)</code></pre></div>
<pre><code>##  [1] 1.0 1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9</code></pre>
<p>There’s a shortcut for sequences with an increment of 1</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>
a</code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div id="the-rep-function" class="section level3">
<h3><span class="header-section-number">4.2.2</span> The <code>rep</code> function</h3>
<p>You can use the <code>rep</code> function to create vectors which contain repetitions of the same elements. Let’s start from the most simple use:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vector1 =<span class="st"> </span><span class="kw">rep</span>(<span class="dv">3</span>, <span class="dv">13</span>)</code></pre></div>
<p>simply creates a vector of 13 elements, all having the value 3. More interestingly, you can repeat sequences of numbers:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">3</span>)</code></pre></div>
<pre><code>##  [1] 1 2 3 4 1 2 3 4 1 2 3 4</code></pre>
<p>as you see the above command repeats the sequence 1,2,3,4 three times. Furthermore, you can also specify the number of times a given element of the sequence should be repeated:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">3</span>, <span class="dt">each=</span><span class="dv">2</span>)</code></pre></div>
<pre><code>##  [1] 1 1 2 2 3 3 4 4 1 1 2 2 3 3 4 4 1 1 2 2 3 3 4 4</code></pre>
<p>There are other ways to achieve this same effect, for example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>)), <span class="dv">3</span>)</code></pre></div>
<pre><code>##  [1] 1 1 2 2 3 3 4 4 1 1 2 2 3 3 4 4 1 1 2 2 3 3 4 4</code></pre>
<p>would yield the same effect.</p>
<p>Even if it can look pretty useless at first, the <code>rep</code> function comes in very handy for example, when you want to transform the data in a table from “one row per subject”, to “one row per observation”, which is necessary for example to run a repeated measures ANOVA with the <code>aov</code> function. <code>rep</code> makes it all easier as you can create vectors in which the occurrence of the levels of a factor are repeated over and over.</p>
</div>
</div>
<div id="matrix-facilities" class="section level2">
<h2><span class="header-section-number">4.3</span> Matrix Facilities</h2>
<p>There are different ways for creating a matrix in R, you often start from a vector, and then transform it into a matrix with the <code>matrix</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">matr =<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>)
matr =<span class="st"> </span><span class="kw">matrix</span>(matr, <span class="dt">ncol=</span><span class="dv">3</span>, <span class="dt">byrow=</span><span class="ot">TRUE</span>)
matr</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    3    5    6
## [2,]    2    5    7
## [3,]    9    1    5
## [4,]    4    2    3</code></pre>
<p>you give to the <code>matrix</code> function either the <code>ncol</code> or the <code>nrow</code> parameters to specify the layout of the matrix. The default method that R uses to fill in the matrix is by columns, so if you want to fill it by rows, you need to set true the option <code>byrow</code>, as in the example above.</p>
<p>Matrix indexing is similar to vector indexing:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">matr[<span class="dv">2</span>,<span class="dv">1</span>]</code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>the first index refers to the row number, and the second index to the column number. Omitting one of the two indexes is useful for slicing, for example</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">matr[,<span class="dv">2</span>]</code></pre></div>
<pre><code>## [1] 5 5 1 2</code></pre>
<p>gives <em>all the rows</em> in the second column. This could alternatively been written as</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">matr[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>,<span class="dv">2</span>]</code></pre></div>
<pre><code>## [1] 5 5 1 2</code></pre>
<p>where the index is a  of rows. This notation is useful when you want to extract only part of the rows or columns, for example</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">matr[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>,<span class="dv">2</span>]</code></pre></div>
<pre><code>## [1] 5 1 2</code></pre>
<p>When the rows or columns to be extracted are not consecutive, you can use a <em>vector</em> of indexes for slicing</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">matr[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>),<span class="dv">2</span>]</code></pre></div>
<pre><code>## [1] 5 2</code></pre>
<p>To query the dimension of the matrix you can use the <code>dim</code> function, in this case our matrix has 4 rows and 3 columns:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(matr)</code></pre></div>
<pre><code>## [1] 4 3</code></pre>
<p>The rows and columns of a matrix can also be assigned a name attribute through the <code>dimnames</code> function. The dimnames have to be a list of character vectors the same length as the matrix dimensions they refer to:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dimnames</span>(matr) =<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">&quot;row1&quot;</span>, <span class="st">&quot;row2&quot;</span>, <span class="st">&quot;row3&quot;</span>, <span class="st">&quot;row4&quot;</span>), <span class="kw">c</span>(<span class="st">&quot;col1&quot;</span>, <span class="st">&quot;col2&quot;</span>, <span class="st">&quot;col3&quot;</span>))
<span class="kw">dimnames</span>(matr) <span class="co">#dimnames is a list</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;row1&quot; &quot;row2&quot; &quot;row3&quot; &quot;row4&quot;
## 
## [[2]]
## [1] &quot;col1&quot; &quot;col2&quot; &quot;col3&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">matr <span class="co">#now the matrix is printed with its dimnames</span></code></pre></div>
<pre><code>##      col1 col2 col3
## row1    3    5    6
## row2    2    5    7
## row3    9    1    5
## row4    4    2    3</code></pre>
<p>the names of the rows can be retrieved with  and the names of the columns with :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rownames</span>(matr)</code></pre></div>
<pre><code>## [1] &quot;row1&quot; &quot;row2&quot; &quot;row3&quot; &quot;row4&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colnames</span>(matr)</code></pre></div>
<pre><code>## [1] &quot;col1&quot; &quot;col2&quot; &quot;col3&quot;</code></pre>
<p>and these names can be indirectly used for sub-setting;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">matr[<span class="dv">1</span>, <span class="kw">which</span>(<span class="kw">colnames</span>(matr) <span class="op">==</span><span class="st"> &#39;col2&#39;</span>)]</code></pre></div>
<pre><code>## [1] 5</code></pre>
<div id="matrix-operations" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Matrix Operations</h3>
<p>The function <code>t</code> gives the transpose of a matrix. The inverse of a matrix is obtained through the function <code>solve</code>. Some other operators are listed in Table <a href="data-manip.html#tab:matrop">4.3</a>). Example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">beta =<span class="st"> </span><span class="kw">solve</span>(<span class="kw">t</span>(x)<span class="op">%*%</span>x)<span class="op">%*%</span>(<span class="kw">t</span>(x)<span class="op">%*%</span>y)</code></pre></div>
<table>
<caption><span id="tab:matrop">Table 4.3: </span> Matrix operations.</caption>
<thead>
<tr class="header">
<th>Operator</th>
<th align="left">Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>%*%</code></td>
<td align="left">Matrix multiplication</td>
</tr>
<tr class="even">
<td><code>det</code> De</td>
<td align="left">terminant</td>
</tr>
<tr class="odd">
<td><code>solve</code> In</td>
<td align="left">verse</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="Lists" class="section level2">
<h2><span class="header-section-number">4.4</span> Lists</h2>
<p>Lists are objects that can contain elements of different modes (e.g numeric, character, logical), as well as other objects (vectors, matrices and also other lists). Let’s build a small list to see how we can work on it:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec1 =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">12</span>
vec2 =<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;w&#39;</span>,<span class="st">&#39;h&#39;</span>,<span class="st">&#39;m&#39;</span>)
mylist =<span class="st"> </span><span class="kw">list</span>(vec1,vec2)
mylist</code></pre></div>
<pre><code>## [[1]]
##  [1]  1  2  3  4  5  6  7  8  9 10 11 12
## 
## [[2]]
## [1] &quot;w&quot; &quot;h&quot; &quot;m&quot;</code></pre>
<p>The syntax for subsetting a list is a bit awkward (but as we’ll see later, naming the elements of a list makes things easier). To access an element of a list you can use the double brackets notation, for example</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mylist[[<span class="dv">1</span>]]</code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12</code></pre>
<p>returns the first element of the list <code>mylist</code>, which is a vector of length 12, if you want to access, say, the third element of this vector, the syntax is as follows</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mylist[[<span class="dv">1</span>]][<span class="dv">3</span>]</code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Naming the elements of the list makes things easier</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mylist=<span class="kw">list</span>(<span class="dt">a=</span>vec1,<span class="dt">b=</span>vec2)
mylist</code></pre></div>
<pre><code>## $a
##  [1]  1  2  3  4  5  6  7  8  9 10 11 12
## 
## $b
## [1] &quot;w&quot; &quot;h&quot; &quot;m&quot;</code></pre>
<p>now the first element of the list is named <code>a</code>, and the second <code>b</code>, and we can access them with a special “dollar sign” notation</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mylist<span class="op">$</span>a ## return element of the list named a</code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mylist<span class="op">$</span>a[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<p>It is also possible to use the double brackets notation with names</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mylist[[<span class="st">&quot;a&quot;</span>]][<span class="dv">3</span>]</code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>To eliminate an element of a list, set it to <code>NULL</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec1 =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)
vec2 =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)
myList =<span class="st"> </span><span class="kw">list</span>(<span class="dt">vec1=</span>vec1, <span class="dt">vec2=</span>vec2)
myList</code></pre></div>
<pre><code>## $vec1
## [1] 1 2 3
## 
## $vec2
## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myList<span class="op">$</span>vec1 =<span class="st"> </span><span class="ot">NULL</span>
myList</code></pre></div>
<pre><code>## $vec2
## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<p>notice that this is different from eliminating an element of the vectors contained in the list, you can do the latter with</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myList<span class="op">$</span>vec2 =<span class="st"> </span>myList<span class="op">$</span>vec2[<span class="op">-</span><span class="dv">1</span>]
myList</code></pre></div>
<pre><code>## $vec2
## [1] &quot;b&quot; &quot;c&quot;</code></pre>
</div>
<div id="dataframes" class="section level2">
<h2><span class="header-section-number">4.5</span> Dataframes</h2>
<p>Dataframes are one of the most important objects in R. You can think of it as a rectangular data structure, in which each column stores either the values of a numeric variable, or the levels of a factor, and each row represents an observation. Let’s look at an example, we’ll build a dataframe from 3 vectors, the first vector stores a variable, number of beers drunk during a week for twelve young people, the second is a factor vector, that specifies for each person whether he/she is a university student or not, so it has two levels, the third is also a factor vector, which tells the sex of each person, so it has two levels as well.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">n_beers =<span class="st"> </span><span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>)
occupation =<span class="st"> </span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;s&quot;</span>, <span class="st">&quot;w&quot;</span>), <span class="dv">6</span>)
sex =<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;m&quot;</span>, <span class="dv">6</span>), <span class="kw">rep</span>(<span class="st">&quot;f&quot;</span>, <span class="dv">6</span>))
occupation =<span class="st"> </span><span class="kw">as.factor</span>(occupation)
sex =<span class="st"> </span><span class="kw">as.factor</span>(sex)</code></pre></div>
<p>well, now let’s create the dataframe</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dats =<span class="st"> </span><span class="kw">data.frame</span>(n_beers,occupation,sex)</code></pre></div>
<p>it’s as simple as this, you have just put the three vectors together, let’s have a look at it</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dats</code></pre></div>
<pre><code>##    n_beers occupation sex
## 1        6          s   m
## 2        8          w   m
## 3        4          s   m
## 4        8          w   m
## 5        9          s   m
## 6        4          w   m
## 7        5          s   f
## 8        3          w   f
## 9        4          s   f
## 10       2          w   f
## 11       3          s   f
## 12       1          w   f</code></pre>
<p>as we said, each row holds the data of a single observation, in this case it corresponds to the data of a subject, but as we’ll see later, this is not always necessarily true. Each row gives a full specification for each observation, we know that the first subject drunk 6 beers, he’s a student, and he’s male, and we could tell the same data for the other subjects. Since we have all this information, we could now compare for example the number of beers drunk by male vs females, or by male students vs female students. There are special functions to compute these values quickly like <code>tapply</code> and <code>by</code> (see <a href="data-manip.html#tapply">4.8.3</a>), and other functions to get statistical tests, they will be dealt with as we go along.</p>
<div id="accessing-parts-of-a-dataframe" class="section level3">
<h3><span class="header-section-number">4.5.1</span> Accessing Parts of a Dataframe</h3>
<p>You can access, or refer to a column of a dataframe with the <code>$</code> operator, in the example above suppose we removed all the original variables after creating the dataframe</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(n_beers,occupation,sex)</code></pre></div>
<p>we can’t now access them directly by name</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(n_beers) <span class="co">#this will throw an object &#39;n_beers&#39; not found error</span></code></pre></div>
<p>we have to retrieve them from the dataframe</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(dats<span class="op">$</span>n_beers)</code></pre></div>
<pre><code>## [1] 4.75</code></pre>
<p>the example might seem artificial (why did I remove them in the first place?), but very often you read in the data directly as a dataframe with the <code>read.table</code> function (see sec.~, so you’ll have to access them from the dataframe. Another option is to use the function <code>attach</code>, which attaches the dataframe to the path that R searches when evaluating a variable, in this way you don’t have to refer to the dataframe to access the values of a variable</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attach</span>(dats)
<span class="kw">mean</span>(n_beers)</code></pre></div>
<pre><code>## [1] 4.75</code></pre>
<p>this is OK only if you’re working with a single dataframe, and you don’t want to manipulate the variables in it. In fact if you accidentally attach two dataframes that share some variable names, or you try to change an object of a dataframe after it has been attached, strange things may happen, you’ve been warned, the details are in the R manual. The function <code>detach</code> detaches the dataframe from the search path.</p>
</div>
<div id="change-the-names-of-variables-in-a-dataframe" class="section level3">
<h3><span class="header-section-number">4.5.2</span> Change the Names of Variables in a Dataframe</h3>
<p>Sometimes you might want to change the names of the variables in a dataframe, for example when you create new dataframes with the <code>unstack</code> function, or just because you don’t like the way you called it initially. You can visualise the names for the variables with the function <code>names</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(dats)</code></pre></div>
<pre><code>## [1] &quot;n_beers&quot;    &quot;occupation&quot; &quot;sex&quot;</code></pre>
<p>or if you want to see just the first one</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(dats)[<span class="dv">1</span>]</code></pre></div>
<pre><code>## [1] &quot;n_beers&quot;</code></pre>
<p>you can change it with a simple assignment</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(dats)[<span class="dv">1</span>] =<span class="st"> &quot;beers&quot;</span></code></pre></div>
<p>or if you want to change more than one</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(dats) =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;brs&quot;</span>, <span class="st">&quot;occ&quot;</span>, <span class="st">&quot;sx&quot;</span>)</code></pre></div>
</div>
<div id="other-ways-to-subset-a-dataframe" class="section level3">
<h3><span class="header-section-number">4.5.3</span> Other Ways to Subset a Dataframe</h3>
<p>A dataframe actually is just a special kind of list (a list of class dataframe), so we can use the normal list notation to subset dataframes</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dats[[<span class="dv">1</span>]]</code></pre></div>
<pre><code>##  [1] 6 8 4 8 9 4 5 3 4 2 3 1</code></pre>
<p>Sometimes it’s useful to think of a dataframe as a matrix, and use matrix notation for subsetting</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dats[<span class="dv">1</span>,] ## extract first row, all columns</code></pre></div>
<pre><code>##   brs occ sx
## 1   6   s  m</code></pre>
<p>dats[which(dats$n_beers&gt;4),] ## records for subjs who drink &gt; 4 beers ```</p>
</div>
</div>
<div id="factors" class="section level2">
<h2><span class="header-section-number">4.6</span> Factors</h2>
<p>Data Vectors can be made not only of numerical values or of strings, but also <em>factors</em>. Factor vectors are very similar to character vectors, and could be seen as character vectors with some special properties. A factor vector usually consists of two or more levels, and can be created with the <code>factor</code> function. For example, suppose we are studying the drinking habits of 6 individuals, and we have measured their alcohol consumption (in alcohol units) during a week:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">alcoholUnits =<span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">15</span>, <span class="dv">10</span>, <span class="dv">1</span>, <span class="dv">4</span>)</code></pre></div>
<p>the first three individuals are males, and the last three females and we can encode this information using a <code>factor</code> vector:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sex =<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>))
sex</code></pre></div>
<pre><code>## [1] m m m f f f
## Levels: f m</code></pre>
<p>as you can see a factor has a <code>levels</code> attribute that specifies the possible values the factor can assume, and by default it is given by the unique values the factor vector can assume, sorted in alphabetical order.</p>
<p>One important side effect of the <code>levels</code> attribute is that the way factor levels are ordered determines the sorting order of statistical summaries and graphics. For example, if we use the <code>tapply</code> function to calculate the average alcohol units consumption by sex:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tapply</span>(alcoholUnits, <span class="kw">list</span>(sex), mean)</code></pre></div>
<pre><code>## f m 
## 5 8</code></pre>
<p>the results for females are shown before the results for males. If we want the results for males to be presented before the results for females we can specify this ordering when creating the factor:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sex =<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>), <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>))
<span class="kw">tapply</span>(alcoholUnits, <span class="kw">list</span>(sex), mean)</code></pre></div>
<pre><code>## m f 
## 8 5</code></pre>
<p>ordering the levels of a factor for display purposes should not be confused with the concept of an <code>ordered</code> factor.</p>
<div id="renaming-the-levels-of-a-factor" class="section level3">
<h3><span class="header-section-number">4.6.1</span> Renaming the levels of a factor</h3>
<p>To rename the levels of a factor we can use the <code>labels</code> argument to the <code>factor</code> function. Suppose that we have a sex factor coded as ‘f’ for females and ‘m’ for males:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sex =<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>))</code></pre></div>
<p>we can change the coding to ‘Male’ and ‘Female’ as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sex =<span class="st"> </span><span class="kw">factor</span>(sex, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;f&quot;</span>, <span class="st">&quot;m&quot;</span>), <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Male&quot;</span>))
sex</code></pre></div>
<pre><code>## [1] Male   Male   Male   Female Female Female
## Levels: Female Male</code></pre>
<p>alternatively we can also use the <code>levels</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sex =<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>))</code></pre></div>
<p>currently the levels are <code>c('f', 'm')</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(sex) <span class="co">#this gets the current levels</span></code></pre></div>
<pre><code>## [1] &quot;f&quot; &quot;m&quot;</code></pre>
<p>we can change them with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(sex) =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Male&quot;</span>) <span class="co">#this sets the levels</span></code></pre></div>
<p>we can also change just the name of one of the levels if we want to:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sex =<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>)) <span class="co">#original factor</span>
<span class="kw">levels</span>(sex)[<span class="kw">which</span>(<span class="kw">levels</span>(sex) <span class="op">==</span><span class="st"> &quot;m&quot;</span>)] =<span class="st"> &quot;Male&quot;</span>
sex</code></pre></div>
<pre><code>## [1] Male Male Male f    f    f   
## Levels: f Male</code></pre>
</div>
<div id="gl" class="section level3">
<h3><span class="header-section-number">4.6.2</span> Creating Factors with <code>gl</code></h3>
<p>A handy function for creating factors for data with a regular pattern of factor levels is </p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sex =<span class="st"> </span><span class="kw">gl</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dt">label=</span><span class="kw">c</span>(<span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>), <span class="dt">length=</span><span class="dv">6</span>)
sex</code></pre></div>
<pre><code>## [1] male   male   male   female female female
## Levels: male female</code></pre>
<p>the first argument to the function specifies the number of levels, and the second argument the number of consecutive repetitions of each level, the pattern is repeated up to the number of elements specified by the length argument. Notice the different pattern created when the number of consecutive repetitions is set to 1 and the total length is left unchanged</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sex =<span class="st"> </span><span class="kw">gl</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dt">label=</span><span class="kw">c</span>(<span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>), <span class="dt">length=</span><span class="dv">6</span>)
sex</code></pre></div>
<pre><code>## [1] male   female male   female male   female
## Levels: male female</code></pre>
</div>
<div id="natural-sort-order-for-character-and-factor-vectors" class="section level3">
<h3><span class="header-section-number">4.6.3</span> Natural sort order for character and factor vectors</h3>
<p>It’s common to assign identifiers to participants in an experiment as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ids =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;P1&quot;</span>, <span class="st">&quot;P2&quot;</span>, <span class="st">&quot;P3&quot;</span>, <span class="st">&quot;P4&quot;</span>, <span class="st">&quot;P5&quot;</span>, <span class="st">&quot;P6&quot;</span>,<span class="st">&quot;P7&quot;</span>, <span class="st">&quot;P8&quot;</span>, <span class="st">&quot;P9&quot;</span>, <span class="st">&quot;P10&quot;</span>, <span class="st">&quot;P11&quot;</span>)</code></pre></div>
<p>when you use these identifiers for summarizing or plotting data as a function of participant id R will sort the output in strict alphabetical order, which is equivalent to the output of this function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sort</span>(ids)</code></pre></div>
<pre><code>##  [1] &quot;P1&quot;  &quot;P10&quot; &quot;P11&quot; &quot;P2&quot;  &quot;P3&quot;  &quot;P4&quot;  &quot;P5&quot;  &quot;P6&quot;  &quot;P7&quot;  &quot;P8&quot;  &quot;P9&quot;</code></pre>
<p>often what you want instead is a natural sort order, in which <code>P10</code> comes after <code>P9</code> and not after <code>P1</code>. To force R to use a natural sort order you can use a factor vector and sort the factor levels using the <code>mixedsort</code> function in the package <code>gtools</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gtools)
fids =<span class="st"> </span><span class="kw">factor</span>(ids, <span class="dt">levels=</span><span class="kw">mixedsort</span>(<span class="kw">levels</span>(ids)))
<span class="kw">sort</span>(fids)</code></pre></div>
<pre><code>## factor(0)
## Levels:</code></pre>
</div>
</div>
<div id="getting-info-on-r-objects" class="section level2">
<h2><span class="header-section-number">4.7</span> Getting Info on R Objects</h2>
<p>The most useful function to summarise information about many R object is <code>str</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a =<span class="st"> </span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="fl">.1</span>)
<span class="kw">str</span>(a)</code></pre></div>
<pre><code>##  num [1:101] 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">b =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)
<span class="kw">str</span>(b)</code></pre></div>
<pre><code>##  chr [1:3] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<p>in the example shown <code>str</code> gives information on the storage mode of the two vectors, numeric for <code>a</code> and character for <code>b</code>, it also gives information on the number of elements present and on the shape of the array (compare the output of <code>str</code> for a vector and a matrix). <code>str</code> gives also useful compact summaries of the contents of lists, including nested lists.</p>
<p>Another useful function is <code>mode</code>, which gives the storage mode of an R object:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mode</span>(a)</code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mode</span>(b)</code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
</div>
<div id="changing-the-format-of-your-data" class="section level2">
<h2><span class="header-section-number">4.8</span> Changing the Format of Your Data</h2>
<p>In general statistical software require your data to be entered in a specific format in order to perform statistical analyses on them, and R is no exception. R provides many powerful functions to change the format of your data if they happen to be in a format that is not suitable for applying a given statistical function on them. The process of changing the format of your data with these functions might seem very complicated at first, however you should keep in mind the following things:</p>
<ul>
<li><p>You don’t really need to learn all of the functions that R provides to manipulate your data and change their format. Once you learn a procedure that does the job you can stick on it and you’ll be fine most of the times.</p></li>
<li><p>Once you understand the “logic” and the structure of the data format that R expects to apply some statistical functions, changing the layout of your data to match this structure will be easy. Moreover the data format R wants is most of the times one and only one: The “one row per observation format”, which will be explained below.</p></li>
<li><p>In this tutorial you will see different examples in which the format of the data, stored in a given file don’t match the format R wants. This is just for illustrative purposes. In real life if you’re doing a research or an experiment, you can often gather your data in a format that is already suitable for performing statistical analyses.</p></li>
<li><p>You don’t really have to use R to change the layout of your data if you don’t like the functions it provides to do this job. You can always use some external programs to achieve the same results, for example spreadsheets programs such as Libreoffice Calc. What’s really important is that you understand the structure of the format the R expects.</p></li>
</ul>
<p>This said, I would advice you to learn some of the functions that R provides to rearrange your data for at least two reasons: 1) They’re very powerful and can actually save you time once you learn them, and 2) many examples in this tutorial and in other books use them, so you’ll often need to know them to understand what’s going on :)</p>
<div id="the-one-row-per-observation-format" class="section level3">
<h3><span class="header-section-number">4.8.1</span> The “One Row per Observation” Format</h3>
<p>While statistic textbooks and scientific articles often show data in a format that is suitable and immediate for the “human eye”, like the one shown in Table <a href="data-manip.html#tab:formath">4.4</a>, statistical software often don’t quite like it and would rather have the same data rearranged as shown in Table <a href="data-manip.html#tab:formatss">4.5</a>.</p>
<table>
<caption><span id="tab:formath">Table 4.4: </span> Data Format Suitable for the “Human Eye”.</caption>
<thead>
<tr class="header">
<th>Group A</th>
<th align="left">Group B</th>
<th>Group C</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>5</td>
<td align="left">4</td>
<td>7</td>
</tr>
<tr class="even">
<td>2</td>
<td align="left">4</td>
<td>5</td>
</tr>
<tr class="odd">
<td>3</td>
<td align="left">5</td>
<td>7</td>
</tr>
<tr class="even">
<td>4</td>
<td align="left">5</td>
<td>8</td>
</tr>
<tr class="odd">
<td>6</td>
<td align="left">4</td>
<td>7</td>
</tr>
</tbody>
</table>
<table>
<caption><span id="tab:formatss">Table 4.5: </span> Data Format Suitable for the R.</caption>
<thead>
<tr class="header">
<th>Value</th>
<th>Group</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>5</td>
<td>A</td>
</tr>
<tr class="even">
<td>2</td>
<td>A</td>
</tr>
<tr class="odd">
<td>3</td>
<td>A</td>
</tr>
<tr class="even">
<td>4</td>
<td>A</td>
</tr>
<tr class="odd">
<td>6</td>
<td>A</td>
</tr>
<tr class="even">
<td>4</td>
<td>B</td>
</tr>
<tr class="odd">
<td>4</td>
<td>B</td>
</tr>
<tr class="even">
<td>5</td>
<td>B</td>
</tr>
<tr class="odd">
<td>5</td>
<td>B</td>
</tr>
<tr class="even">
<td>4</td>
<td>B</td>
</tr>
<tr class="odd">
<td>7</td>
<td>C</td>
</tr>
<tr class="even">
<td>5</td>
<td>C</td>
</tr>
<tr class="odd">
<td>7</td>
<td>C</td>
</tr>
<tr class="even">
<td>8</td>
<td>C</td>
</tr>
<tr class="odd">
<td>7</td>
<td>C</td>
</tr>
</tbody>
</table>
<p>The main difference is that while in the first format you have more than one observation in the same row, and you can identify the group to which each observation belongs to through the column headers (“Group A”, “Group B” and “Group C”), in the second format you have only one observation for each row. This observation is then fully identified with a “label” that appears in the second column. A better way to describe the second column is to say that in the above case “Group” is a <strong>factor</strong>, and “A”, “B” and “C” define the <strong>levels</strong> of this factor for each group.</p>
<p>You could also be running an experiment in which you manipulate more than one factor. For example you might have two groups, “Patients” and “Controls”, which are tested under two conditions “1” and condition “2”. In this case you might display your data as shown in Table <a href="data-manip.html#tab:formath2">4.6</a> to make them easily readable to humans. However for analysing your data with R, in this case you would need to add another column specifying the levels of the other factor for each observation as shown in Table <a href="data-manip.html#tab:formatss2">4.7</a></p>
<table>
<caption><span id="tab:formath2">Table 4.6: </span> Data Format Suitable for the “Human Eye” with More than One Factor.</caption>
<thead>
<tr class="header">
<th>Patients Condition1</th>
<th>Patients Condition 2</th>
<th>Controls Condition 1</th>
<th>Controls Condition 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>7</td>
<td>6</td>
<td>6</td>
<td>4</td>
</tr>
<tr class="even">
<td>5</td>
<td>4</td>
<td>5</td>
<td>2</td>
</tr>
<tr class="odd">
<td>8</td>
<td>7</td>
<td>7</td>
<td>4</td>
</tr>
<tr class="even">
<td>8</td>
<td>8</td>
<td>6</td>
<td>5</td>
</tr>
<tr class="odd">
<td>6</td>
<td>5</td>
<td>5</td>
<td>3</td>
</tr>
</tbody>
</table>
<table>
<caption><span id="tab:formatss2">Table 4.7: </span> Data Format Suitable for R with More than One Factor.</caption>
<thead>
<tr class="header">
<th>Value</th>
<th>Group</th>
<th>Condition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>7</td>
<td>P</td>
<td>1</td>
</tr>
<tr class="even">
<td>5</td>
<td>P</td>
<td>1</td>
</tr>
<tr class="odd">
<td>8</td>
<td>P</td>
<td>1</td>
</tr>
<tr class="even">
<td>8</td>
<td>P</td>
<td>1</td>
</tr>
<tr class="odd">
<td>6</td>
<td>P</td>
<td>1</td>
</tr>
<tr class="even">
<td>6</td>
<td>P</td>
<td>2</td>
</tr>
<tr class="odd">
<td>4</td>
<td>P</td>
<td>2</td>
</tr>
<tr class="even">
<td>7</td>
<td>P</td>
<td>2</td>
</tr>
<tr class="odd">
<td>8</td>
<td>P</td>
<td>2</td>
</tr>
<tr class="even">
<td>5</td>
<td>P</td>
<td>2</td>
</tr>
<tr class="odd">
<td>6</td>
<td>C</td>
<td>1</td>
</tr>
<tr class="even">
<td>5</td>
<td>C</td>
<td>1</td>
</tr>
<tr class="odd">
<td>7</td>
<td>C</td>
<td>1</td>
</tr>
<tr class="even">
<td>6</td>
<td>C</td>
<td>1</td>
</tr>
<tr class="odd">
<td>5</td>
<td>C</td>
<td>1</td>
</tr>
<tr class="even">
<td>4</td>
<td>C</td>
<td>2</td>
</tr>
<tr class="odd">
<td>2</td>
<td>C</td>
<td>2</td>
</tr>
<tr class="even">
<td>4</td>
<td>C</td>
<td>2</td>
</tr>
<tr class="odd">
<td>5</td>
<td>C</td>
<td>2</td>
</tr>
<tr class="even">
<td>3</td>
<td>C</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>Finally, you might be running an experiment with a repeated measures design, in which all subjects are exposed to all the levels of all the within subjects factors. For example you might have your subjects recall word lists either under the effects of a drug or not (factor 1) and with words concrete or abstract words (factor 2). In this case the data for presentation might look like the ones in Table <a href="data-manip.html#tab:repeatedh">4.8</a>, in which each row represents a single subject. Again for R you need to rearrange the data so that each row represents a single observation, and in the case of a repeated measures design you need to add another column that identifies the levels of the “subjects” factor as shown in Table <a href="data-manip.html#tab:repeatedr">4.9</a></p>
<table>
<caption><span id="tab:repeatedh">Table 4.8: </span> Data Format Suitable for the “Human Eye”, repeated measures design.</caption>
<thead>
<tr class="header">
<th>Drug Concrete</th>
<th>Drug Abstract</th>
<th>No-Drug Concrete</th>
<th>No-Drug Abstract</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>7</td>
<td>6</td>
<td>6</td>
<td>4</td>
</tr>
<tr class="even">
<td>5</td>
<td>4</td>
<td>5</td>
<td>2</td>
</tr>
<tr class="odd">
<td>8</td>
<td>7</td>
<td>7</td>
<td>4</td>
</tr>
<tr class="even">
<td>8</td>
<td>8</td>
<td>6</td>
<td>5</td>
</tr>
<tr class="odd">
<td>6</td>
<td>5</td>
<td>5</td>
<td>3</td>
</tr>
</tbody>
</table>
<table>
<caption><span id="tab:repeatedr">Table 4.9: </span> Data Format Suitable for R, repeated measures design.</caption>
<thead>
<tr class="header">
<th>Value</th>
<th>Drug Exposure</th>
<th>Word Type</th>
<th>Subject</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>7</td>
<td>D</td>
<td>C</td>
<td>1</td>
</tr>
<tr class="even">
<td>5</td>
<td>D</td>
<td>C</td>
<td>2</td>
</tr>
<tr class="odd">
<td>8</td>
<td>D</td>
<td>C</td>
<td>3</td>
</tr>
<tr class="even">
<td>8</td>
<td>D</td>
<td>C</td>
<td>4</td>
</tr>
<tr class="odd">
<td>6</td>
<td>D</td>
<td>C</td>
<td>5</td>
</tr>
<tr class="even">
<td>6</td>
<td>D</td>
<td>A</td>
<td>1</td>
</tr>
<tr class="odd">
<td>4</td>
<td>D</td>
<td>A</td>
<td>2</td>
</tr>
<tr class="even">
<td>7</td>
<td>D</td>
<td>A</td>
<td>3</td>
</tr>
<tr class="odd">
<td>8</td>
<td>D</td>
<td>A</td>
<td>4</td>
</tr>
<tr class="even">
<td>5</td>
<td>D</td>
<td>A</td>
<td>5</td>
</tr>
<tr class="odd">
<td>6</td>
<td>N</td>
<td>C</td>
<td>1</td>
</tr>
<tr class="even">
<td>5</td>
<td>N</td>
<td>C</td>
<td>2</td>
</tr>
<tr class="odd">
<td>7</td>
<td>N</td>
<td>C</td>
<td>3</td>
</tr>
<tr class="even">
<td>6</td>
<td>N</td>
<td>C</td>
<td>4</td>
</tr>
<tr class="odd">
<td>5</td>
<td>N</td>
<td>C</td>
<td>5</td>
</tr>
<tr class="even">
<td>4</td>
<td>N</td>
<td>A</td>
<td>1</td>
</tr>
<tr class="odd">
<td>2</td>
<td>N</td>
<td>A</td>
<td>2</td>
</tr>
<tr class="even">
<td>4</td>
<td>N</td>
<td>A</td>
<td>3</td>
</tr>
<tr class="odd">
<td>5</td>
<td>N</td>
<td>A</td>
<td>4</td>
</tr>
<tr class="even">
<td>3</td>
<td>N</td>
<td>A</td>
<td>5</td>
</tr>
</tbody>
</table>
</div>
<div id="stack" class="section level3">
<h3><span class="header-section-number">4.8.2</span> The <code>stack</code> and <code>unstack</code> functions</h3>
<p>One of the utilities provided by R to manipulate the format of your data is the <code>stack</code> function. If you have your data in a <strong>dataframe</strong> with a layout similar to that shown in Table @ref{tab:formath}, you can use the <code>stack</code> function to get a “one row per observation” format. What the <code>stack</code> function does is to create a single long vector from the vectors you have in your dataframe, and an additional factor vector which identifies the level for each observation. Here’s an example, the data are in the file <code>stack.txt</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dats=<span class="kw">read.table</span>(<span class="st">&quot;stack.txt&quot;</span>,<span class="dt">header=</span><span class="ot">TRUE</span>)</code></pre></div>
<p>this creates the dataframe</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dats =<span class="st"> </span><span class="kw">stack</span>(dats)</code></pre></div>
<p>this reshapes the dataframe into a “one row per observation form”</p>
<p>Please note that R assigns names to the vectors in the new dataframe, you can see them in the header of the dataframe, you might need to know them for successive operations.</p>
<p>The <code>unstack</code> function simply does the opposite of the <code>stack</code> function, and you can use it if you want to switch back to your original dataframe format.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dats =<span class="st"> </span><span class="kw">unstack</span>(dats)</code></pre></div>
<p>The <code>unstack</code> function can do more tricks, if you have a dataframe with one observation per row, a column with a response variable, and two or more factor columns, you can unstack the values of the response variable according to the levels of only one factors or according to the levels of two or more factors. Suppose <code>lat</code> is your response variable, and you have two factors, <code>congr</code> with 3 levels and <code>isi</code>, also with 3 levels. The command:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dats =<span class="st"> </span><span class="kw">unstack</span>(dats, <span class="dt">form=</span>lat<span class="op">~</span>congr)</code></pre></div>
<p>unstack the values of the response variable according to the levels of the <code>congr</code> factor, thus creating 3 columns, one for each level.</p>
<p>The command:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dats =<span class="st"> </span><span class="kw">unstack</span>(dats,<span class="dt">form=</span>lat<span class="op">~</span>congr<span class="op">:</span>isi)</code></pre></div>
<p>unstacks the values of the response variable according to the levels of both factors, thus creating <span class="math inline">\(3x3= 9\)</span> columns, the first column contains the values at level 1 of <code>congr</code> and level 1 of <code>isi</code>, the second one contains the values at level 1 of <code>congr</code> and level 2 of <code>isi</code>, and so on for all the possible combinations.</p>
</div>
<div id="tapply" class="section level3">
<h3><span class="header-section-number">4.8.3</span> The <code>tapply</code> and <code>aggregate</code> functions</h3>
<p>The <code>tapply</code> function allows you to extract information from a dataframe, for example the mean or standard deviation of a given variable on the bases of one or more factor. The function name is related to the fact that it is used to <em>apply</em> a function (e.g. the mean) to a subsets of the dataframe chosen on the basis of one or more factors. We’ll use the <code>InsectSprays</code> dataset to illustrate the use of <code>tapply</code>. The dataset contains the number of insects still alive in agricultural experimental units treated with six different types of pesticide.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(InsectSprays)
<span class="kw">head</span>(InsectSprays)</code></pre></div>
<pre><code>##   count spray
## 1    10     A
## 2     7     A
## 3    20     A
## 4    14     A
## 5    14     A
## 6    12     A</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">meanSpray =<span class="st"> </span><span class="kw">tapply</span>(<span class="dt">X=</span>InsectSprays<span class="op">$</span>count,
                  <span class="dt">INDEX=</span>InsectSprays<span class="op">$</span>spray,
                  <span class="dt">FUN=</span>mean)
meanSpray</code></pre></div>
<pre><code>##         A         B         C         D         E         F 
## 14.500000 15.333333  2.083333  4.916667  3.500000 16.666667</code></pre>
<p>the arguments to <code>tapply</code> are <code>X</code>, the column of the dataframe to which the function should be applied, <code>INDEX</code>, the factor used for subsetting the dataframe, and <code>FUN</code>, the function to be applied. The function returns an array, in this case a vector, but can be a matrix, or multi-dimensional array. The <code>INDEX</code> argument indeed can be a <em>list</em> of factors, in this case the function chosen is applied to group of values given by a unique combination of the levels of these factors. We’ll see an example by modifying the <code>InsectSprays</code> dataset including another fictitious factor. The new factor will be the season in which the fields were sprayed. The values will be returned in a matrix.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">season =<span class="st"> </span><span class="kw">gl</span>(<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">72</span>, <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;winter&quot;</span>, <span class="st">&quot;spring&quot;</span>,
                                 <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;autumn&quot;</span>))
Ins =<span class="st"> </span><span class="kw">data.frame</span>(InsectSprays, season)
meanSpray =<span class="st"> </span><span class="kw">tapply</span>(<span class="dt">X=</span>Ins<span class="op">$</span>count,
                   <span class="dt">INDEX=</span><span class="kw">list</span>(Ins<span class="op">$</span>spray, Ins<span class="op">$</span>season),
                   <span class="dt">FUN=</span>mean)
meanSpray</code></pre></div>
<pre><code>##      winter    spring    summer    autumn
## A 12.333333 13.333333 16.666667 15.666667
## B 16.333333 13.666667 17.666667 13.666667
## C  2.666667  2.000000  2.000000  1.666667
## D  6.666667  4.333333  5.000000  3.666667
## E  3.666667  4.666667  1.666667  4.000000
## F 11.666667 17.666667 16.333333 21.000000</code></pre>
<p>The <code>tapply</code> is often very useful, for example, after having calculated the means in this way, it is very easy to visualise the data with a barplot</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">barplot</span>(meanSpray, <span class="dt">beside=</span><span class="ot">TRUE</span>, <span class="dt">legend=</span>T)</code></pre></div>
<p>The <code>aggregate</code> function is very similar to tapply, but rather than returning an array, it returns a dataframe, which can be useful in some situations.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">InsDf =<span class="st"> </span><span class="kw">aggregate</span>(<span class="dt">x=</span>Ins<span class="op">$</span>count,
                  <span class="dt">by=</span><span class="kw">list</span>(<span class="dt">sprayType=</span>Ins<span class="op">$</span>spray, <span class="dt">season=</span>Ins<span class="op">$</span>season),
                  <span class="dt">FUN=</span>mean)
InsDf</code></pre></div>
<pre><code>##    sprayType season         x
## 1          A winter 12.333333
## 2          B winter 16.333333
## 3          C winter  2.666667
## 4          D winter  6.666667
## 5          E winter  3.666667
## 6          F winter 11.666667
## 7          A spring 13.333333
## 8          B spring 13.666667
## 9          C spring  2.000000
## 10         D spring  4.333333
## 11         E spring  4.666667
## 12         F spring 17.666667
## 13         A summer 16.666667
## 14         B summer 17.666667
## 15         C summer  2.000000
## 16         D summer  5.000000
## 17         E summer  1.666667
## 18         F summer 16.333333
## 19         A autumn 15.666667
## 20         B autumn 13.666667
## 21         C autumn  1.666667
## 22         D autumn  3.666667
## 23         E autumn  4.000000
## 24         F autumn 21.000000</code></pre>
<p>if you don’t give a name to the grouping factors as we did with <code>SprayType=Ins$spray</code> a default name will be given. One slightly annoying thing is that, as far as I know, it is not possible to assign a name to the resulting variable (it will just be named <code>x</code>). However it can be changed afterwards, here’s a solution that should work whatever the number of factors in the dataframe:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(InsDf)</code></pre></div>
<pre><code>## [1] &quot;sprayType&quot; &quot;season&quot;    &quot;x&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(InsDf)[<span class="kw">which</span>(<span class="kw">names</span>(InsDf)<span class="op">==</span><span class="st">&quot;x&quot;</span>)] =<span class="st"> &quot;count&quot;</span>
<span class="kw">names</span>(InsDf)</code></pre></div>
<pre><code>## [1] &quot;sprayType&quot; &quot;season&quot;    &quot;count&quot;</code></pre>
</div>
</div>
<div id="creating-and-editing-data-objects-through-a-visual-interface" class="section level2">
<h2><span class="header-section-number">4.9</span> Creating and Editing Data Objects through a Visual Interface</h2>
<p>If you want to use a visual interface for creating a dataframe, first create an empty dataframe with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mydataframe =<span class="st"> </span><span class="kw">data.frame</span>()</code></pre></div>
<p>then you can call a spreadsheet like editor to fill in the dataframe with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data.entry</span>(mydataframe)</code></pre></div>
<p>or</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">fix</span>(mydataframe)</code></pre></div>
<p>If the data object is a vector, <code>fix</code> will call a text editor to edit the object instead of the spreadsheet like interface, so if you want the latter, use the function <code>data.entry</code> instead. However, using a simple text editor for fixing a vector might be more practical, if you want to use a different text editor from the one that <code>fix</code> calls by default, you can change the <code>editor</code> option:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">fix</span>(myvector, <span class="dt">editor=</span><span class="st">&quot;emacs&quot;</span>)</code></pre></div>
<p>or just call the editor on the object:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">emacs</span>(myvector)</code></pre></div>
<p>On Windows you could try:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">fix</span>(myvector, <span class="dt">editor=</span><span class="st">&quot;notepad&quot;</span>)</code></pre></div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="organising-a-working-session.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualising-your-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/sam81/rguide/edit/master/data_manipulation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["rguide.pdf", "rguide.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
