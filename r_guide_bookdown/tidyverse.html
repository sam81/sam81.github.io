<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>12 Tidyverse | A R Guide</title>
  <meta name="description" content="A guide for the R programming language." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="12 Tidyverse | A R Guide" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A guide for the R programming language." />
  <meta name="github-repo" content="sam81/rguide" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="12 Tidyverse | A R Guide" />
  
  <meta name="twitter:description" content="A guide for the R programming language." />
  

<meta name="author" content="Samuele Carcagno" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="lattice.html"/>
<link rel="next" href="probability-distribution-functions.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./preface.html">A R Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Installing R</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#installing-the-base-program"><i class="fa fa-check"></i><b>1.1</b> Installing the Base Program</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#gnulinux-and-other-unices"><i class="fa fa-check"></i><b>1.1.1</b> GNU/Linux and Other Unices</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro.html"><a href="intro.html#windows"><i class="fa fa-check"></i><b>1.1.2</b> Windows</a></li>
<li class="chapter" data-level="1.1.3" data-path="intro.html"><a href="intro.html#mac-os-x"><i class="fa fa-check"></i><b>1.1.3</b> Mac Os X</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#installing-add-on-packages"><i class="fa fa-check"></i><b>1.2</b> Installing Add-On Packages</a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#gnulinux-and-other-unices-1"><i class="fa fa-check"></i><b>1.2.1</b> GNU/Linux and Other Unices</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro.html"><a href="intro.html#windows-1"><i class="fa fa-check"></i><b>1.2.2</b> Windows</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html"><i class="fa fa-check"></i><b>2</b> A Simple Introduction to R</a><ul>
<li class="chapter" data-level="2.1" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#datasets"><i class="fa fa-check"></i><b>2.1</b> Datasets</a></li>
<li class="chapter" data-level="2.2" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#firing-up-and-quitting-r"><i class="fa fa-check"></i><b>2.2</b> Firing up and Quitting R</a></li>
<li class="chapter" data-level="2.3" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#starting-to-work-with-r"><i class="fa fa-check"></i><b>2.3</b> Starting to Work with R</a></li>
<li class="chapter" data-level="2.4" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#gettinghelp"><i class="fa fa-check"></i><b>2.4</b> Getting Help</a><ul>
<li class="chapter" data-level="2.4.1" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#the-online-help-system"><i class="fa fa-check"></i><b>2.4.1</b> The Online Help System</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#gui"><i class="fa fa-check"></i><b>2.5</b> Working with a Graphical User Interface</a><ul>
<li class="chapter" data-level="2.5.1" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#r-studio"><i class="fa fa-check"></i><b>2.5.1</b> R Studio</a></li>
<li class="chapter" data-level="2.5.2" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#the-r-commander"><i class="fa fa-check"></i><b>2.5.2</b> The R Commander</a></li>
<li class="chapter" data-level="2.5.3" data-path="a-simple-introduction-to-r.html"><a href="a-simple-introduction-to-r.html#jgr"><i class="fa fa-check"></i><b>2.5.3</b> JGR</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="organising-a-working-session.html"><a href="organising-a-working-session.html"><i class="fa fa-check"></i><b>3</b> Organising a Working Session</a><ul>
<li class="chapter" data-level="3.1" data-path="organising-a-working-session.html"><a href="organising-a-working-session.html#setting-and-changing-the-working-directory"><i class="fa fa-check"></i><b>3.1</b> Setting and Changing the Working Directory</a></li>
<li class="chapter" data-level="3.2" data-path="organising-a-working-session.html"><a href="organising-a-working-session.html#objects"><i class="fa fa-check"></i><b>3.2</b> Objects</a></li>
<li class="chapter" data-level="3.3" data-path="organising-a-working-session.html"><a href="organising-a-working-session.html#saving-and-using-the-workspace-image"><i class="fa fa-check"></i><b>3.3</b> Saving and Using the “Workspace Image”</a></li>
<li class="chapter" data-level="3.4" data-path="organising-a-working-session.html"><a href="organising-a-working-session.html#working-in-batch-mode"><i class="fa fa-check"></i><b>3.4</b> Working in Batch Mode</a><ul>
<li class="chapter" data-level="3.4.1" data-path="organising-a-working-session.html"><a href="organising-a-working-session.html#executing-commands-written-in-a-file-from-an-r-session"><i class="fa fa-check"></i><b>3.4.1</b> Executing commands written in a file from an R session</a></li>
<li class="chapter" data-level="3.4.2" data-path="organising-a-working-session.html"><a href="organising-a-working-session.html#executing-commands-written-in-a-file-from-a-shell"><i class="fa fa-check"></i><b>3.4.2</b> Executing commands written in a file from a shell</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="datamanip.html"><a href="datamanip.html"><i class="fa fa-check"></i><b>4</b> Data Types and Data Manipulation</a><ul>
<li class="chapter" data-level="4.1" data-path="datamanip.html"><a href="datamanip.html#vectors"><i class="fa fa-check"></i><b>4.1</b> Vectors</a></li>
<li class="chapter" data-level="4.2" data-path="datamanip.html"><a href="datamanip.html#indexing-vectors"><i class="fa fa-check"></i><b>4.2</b> Indexing Vectors</a><ul>
<li class="chapter" data-level="4.2.1" data-path="datamanip.html"><a href="datamanip.html#the-seq-function"><i class="fa fa-check"></i><b>4.2.1</b> The <code>seq</code> Function</a></li>
<li class="chapter" data-level="4.2.2" data-path="datamanip.html"><a href="datamanip.html#the-rep-function"><i class="fa fa-check"></i><b>4.2.2</b> The <code>rep</code> function</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="datamanip.html"><a href="datamanip.html#matrix-facilities"><i class="fa fa-check"></i><b>4.3</b> Matrix Facilities</a><ul>
<li class="chapter" data-level="4.3.1" data-path="datamanip.html"><a href="datamanip.html#matrix-operations"><i class="fa fa-check"></i><b>4.3.1</b> Matrix Operations</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="datamanip.html"><a href="datamanip.html#Lists"><i class="fa fa-check"></i><b>4.4</b> Lists</a></li>
<li class="chapter" data-level="4.5" data-path="datamanip.html"><a href="datamanip.html#dataframes"><i class="fa fa-check"></i><b>4.5</b> Dataframes</a><ul>
<li class="chapter" data-level="4.5.1" data-path="datamanip.html"><a href="datamanip.html#accessing-parts-of-a-dataframe"><i class="fa fa-check"></i><b>4.5.1</b> Accessing Parts of a Dataframe</a></li>
<li class="chapter" data-level="4.5.2" data-path="datamanip.html"><a href="datamanip.html#change-the-names-of-variables-in-a-dataframe"><i class="fa fa-check"></i><b>4.5.2</b> Change the Names of Variables in a Dataframe</a></li>
<li class="chapter" data-level="4.5.3" data-path="datamanip.html"><a href="datamanip.html#other-ways-to-subset-a-dataframe"><i class="fa fa-check"></i><b>4.5.3</b> Other Ways to Subset a Dataframe</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="datamanip.html"><a href="datamanip.html#factors"><i class="fa fa-check"></i><b>4.6</b> Factors</a><ul>
<li class="chapter" data-level="4.6.1" data-path="datamanip.html"><a href="datamanip.html#renaming-the-levels-of-a-factor"><i class="fa fa-check"></i><b>4.6.1</b> Renaming the levels of a factor</a></li>
<li class="chapter" data-level="4.6.2" data-path="datamanip.html"><a href="datamanip.html#gl"><i class="fa fa-check"></i><b>4.6.2</b> Creating Factors with <code>gl</code></a></li>
<li class="chapter" data-level="4.6.3" data-path="datamanip.html"><a href="datamanip.html#natural-sort-order-for-character-and-factor-vectors"><i class="fa fa-check"></i><b>4.6.3</b> Natural sort order for character and factor vectors</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="datamanip.html"><a href="datamanip.html#getting-info-on-r-objects"><i class="fa fa-check"></i><b>4.7</b> Getting Info on R Objects</a></li>
<li class="chapter" data-level="4.8" data-path="datamanip.html"><a href="datamanip.html#changing-the-format-of-your-data"><i class="fa fa-check"></i><b>4.8</b> Changing the Format of Your Data</a><ul>
<li class="chapter" data-level="4.8.1" data-path="datamanip.html"><a href="datamanip.html#the-one-row-per-observation-format"><i class="fa fa-check"></i><b>4.8.1</b> The “One Row per Observation” Format</a></li>
<li class="chapter" data-level="4.8.2" data-path="datamanip.html"><a href="datamanip.html#stack"><i class="fa fa-check"></i><b>4.8.2</b> The <code>stack</code> and <code>unstack</code> functions</a></li>
<li class="chapter" data-level="4.8.3" data-path="datamanip.html"><a href="datamanip.html#tapply"><i class="fa fa-check"></i><b>4.8.3</b> The <code>tapply</code> and <code>aggregate</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="datamanip.html"><a href="datamanip.html#the-scale-function"><i class="fa fa-check"></i><b>4.9</b> The <code>scale</code> Function</a></li>
<li class="chapter" data-level="4.10" data-path="datamanip.html"><a href="datamanip.html#creating-and-editing-data-objects-through-a-visual-interface"><i class="fa fa-check"></i><b>4.10</b> Creating and Editing Data Objects through a Visual Interface</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="visualising-your-data.html"><a href="visualising-your-data.html"><i class="fa fa-check"></i><b>5</b> Visualising Your Data</a><ul>
<li class="chapter" data-level="5.1" data-path="visualising-your-data.html"><a href="visualising-your-data.html#reading-numbers-in-exponential-notation"><i class="fa fa-check"></i><b>5.1</b> Reading Numbers in Exponential Notation</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="IO.html"><a href="IO.html"><i class="fa fa-check"></i><b>6</b> File Input/Output</a><ul>
<li class="chapter" data-level="6.1" data-path="IO.html"><a href="IO.html#reading-in-data-from-a-file"><i class="fa fa-check"></i><b>6.1</b> Reading In Data from a File</a><ul>
<li class="chapter" data-level="6.1.1" data-path="IO.html"><a href="IO.html#read.table"><i class="fa fa-check"></i><b>6.1.1</b> The <code>read.table</code> function</a></li>
<li class="chapter" data-level="6.1.2" data-path="IO.html"><a href="IO.html#scan"><i class="fa fa-check"></i><b>6.1.2</b> <code>scan</code></a></li>
<li class="chapter" data-level="6.1.3" data-path="IO.html"><a href="IO.html#low-level-file-input"><i class="fa fa-check"></i><b>6.1.3</b> Low-Level File Input</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="IO.html"><a href="IO.html#writing-data-to-a-file"><i class="fa fa-check"></i><b>6.2</b> Writing data to a file</a><ul>
<li class="chapter" data-level="6.2.1" data-path="IO.html"><a href="IO.html#write.table"><i class="fa fa-check"></i><b>6.2.1</b> The <code>write.table</code> function</a></li>
<li class="chapter" data-level="6.2.2" data-path="IO.html"><a href="IO.html#saving-objecs-in-binary-format"><i class="fa fa-check"></i><b>6.2.2</b> Saving objecs in binary format</a></li>
<li class="chapter" data-level="6.2.3" data-path="IO.html"><a href="IO.html#cat"><i class="fa fa-check"></i><b>6.2.3</b> Low-Level File Output</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="graphics.html"><a href="graphics.html"><i class="fa fa-check"></i><b>7</b> Graphics</a><ul>
<li class="chapter" data-level="7.1" data-path="graphics.html"><a href="graphics.html#overview-of-r-base-graphics-functions"><i class="fa fa-check"></i><b>7.1</b> Overview of R base graphics functions</a></li>
<li class="chapter" data-level="7.2" data-path="graphics.html"><a href="graphics.html#plot"><i class="fa fa-check"></i><b>7.2</b> The <code>plot</code> Function</a></li>
<li class="chapter" data-level="7.3" data-path="graphics.html"><a href="graphics.html#drawing-functions"><i class="fa fa-check"></i><b>7.3</b> Drawing Functions</a><ul>
<li class="chapter" data-level="7.3.1" data-path="graphics.html"><a href="graphics.html#the-matplot-function"><i class="fa fa-check"></i><b>7.3.1</b> The <code>matplot</code> function</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="graphics.html"><a href="graphics.html#barplots"><i class="fa fa-check"></i><b>7.4</b> Barplots</a><ul>
<li class="chapter" data-level="7.4.1" data-path="graphics.html"><a href="graphics.html#barplots-with-error-bars"><i class="fa fa-check"></i><b>7.4.1</b> Barplots with Error Bars</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="graphics.html"><a href="graphics.html#boxplots"><i class="fa fa-check"></i><b>7.5</b> Boxplots</a></li>
<li class="chapter" data-level="7.6" data-path="graphics.html"><a href="graphics.html#histograms"><i class="fa fa-check"></i><b>7.6</b> Histograms</a></li>
<li class="chapter" data-level="7.7" data-path="graphics.html"><a href="graphics.html#stripcharts"><i class="fa fa-check"></i><b>7.7</b> Stripcharts</a></li>
<li class="chapter" data-level="7.8" data-path="graphics.html"><a href="graphics.html#interaction-plots"><i class="fa fa-check"></i><b>7.8</b> Interaction Plots</a></li>
<li class="chapter" data-level="7.9" data-path="graphics.html"><a href="graphics.html#par"><i class="fa fa-check"></i><b>7.9</b> Setting Graphics Parameters</a><ul>
<li class="chapter" data-level="7.9.1" data-path="graphics.html"><a href="graphics.html#saving-and-restoring-graphics-parameters"><i class="fa fa-check"></i><b>7.9.1</b> Saving and Restoring Graphics Parameters</a></li>
<li class="chapter" data-level="7.9.2" data-path="graphics.html"><a href="graphics.html#lty"><i class="fa fa-check"></i><b>7.9.2</b> Line type with the <code>lty</code> parameter</a></li>
<li class="chapter" data-level="7.9.3" data-path="graphics.html"><a href="graphics.html#secpch"><i class="fa fa-check"></i><b>7.9.3</b> Symbols with the <code>pch</code> parameter</a></li>
<li class="chapter" data-level="7.9.4" data-path="graphics.html"><a href="graphics.html#parfonts"><i class="fa fa-check"></i><b>7.9.4</b> Fonts</a></li>
<li class="chapter" data-level="7.9.5" data-path="graphics.html"><a href="graphics.html#parcolors"><i class="fa fa-check"></i><b>7.9.5</b> Colors</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="graphics.html"><a href="graphics.html#adding-elements-to-a-plot"><i class="fa fa-check"></i><b>7.10</b> Adding Elements to a Plot</a><ul>
<li class="chapter" data-level="7.10.1" data-path="graphics.html"><a href="graphics.html#legend"><i class="fa fa-check"></i><b>7.10.1</b> Adding a Legend</a></li>
<li class="chapter" data-level="7.10.2" data-path="graphics.html"><a href="graphics.html#adding-text"><i class="fa fa-check"></i><b>7.10.2</b> Adding Text</a></li>
<li class="chapter" data-level="7.10.3" data-path="graphics.html"><a href="graphics.html#addgrid"><i class="fa fa-check"></i><b>7.10.3</b> Adding a Grid</a></li>
<li class="chapter" data-level="7.10.4" data-path="graphics.html"><a href="graphics.html#axes"><i class="fa fa-check"></i><b>7.10.4</b> Setting the Axes</a></li>
</ul></li>
<li class="chapter" data-level="7.11" data-path="graphics.html"><a href="graphics.html#glayout"><i class="fa fa-check"></i><b>7.11</b> Creating Layouts for Multiple Graphs</a><ul>
<li class="chapter" data-level="7.11.1" data-path="graphics.html"><a href="graphics.html#mfrow-and-mfcol-mfrowmfcol"><i class="fa fa-check"></i><b>7.11.1</b> mfrow and mfcol {mfrowmfcol}</a></li>
<li class="chapter" data-level="7.11.2" data-path="graphics.html"><a href="graphics.html#layout"><i class="fa fa-check"></i><b>7.11.2</b> layout</a></li>
</ul></li>
<li class="chapter" data-level="7.12" data-path="graphics.html"><a href="graphics.html#graphics-device-regions-and-coordinates"><i class="fa fa-check"></i><b>7.12</b> Graphics Device Regions and Coordinates</a></li>
<li class="chapter" data-level="7.13" data-path="graphics.html"><a href="graphics.html#colours-for-graphics"><i class="fa fa-check"></i><b>7.13</b> Colours for Graphics</a><ul>
<li class="chapter" data-level="7.13.1" data-path="graphics.html"><a href="graphics.html#colour-opacity"><i class="fa fa-check"></i><b>7.13.1</b> Colour Opacity</a></li>
</ul></li>
<li class="chapter" data-level="7.14" data-path="graphics.html"><a href="graphics.html#managing-graphic-devices"><i class="fa fa-check"></i><b>7.14</b> Managing Graphic Devices</a><ul>
<li class="chapter" data-level="7.14.1" data-path="graphics.html"><a href="graphics.html#opening-another-graphics-window"><i class="fa fa-check"></i><b>7.14.1</b> Opening Another Graphics Window</a></li>
<li class="chapter" data-level="7.14.2" data-path="graphics.html"><a href="graphics.html#exporting-graphics"><i class="fa fa-check"></i><b>7.14.2</b> Exporting Graphics</a></li>
</ul></li>
<li class="chapter" data-level="7.15" data-path="graphics.html"><a href="graphics.html#plotmath"><i class="fa fa-check"></i><b>7.15</b> Mathematical expressions and variables</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="fonts.html"><a href="fonts.html"><i class="fa fa-check"></i><b>8</b> Fonts for graphics</a></li>
<li class="chapter" data-level="9" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>9</b> ggplot2</a><ul>
<li class="chapter" data-level="9.1" data-path="ggplot2.html"><a href="ggplot2.html#common-charts"><i class="fa fa-check"></i><b>9.1</b> Common charts</a><ul>
<li class="chapter" data-level="9.1.1" data-path="ggplot2.html"><a href="ggplot2.html#barplots-1"><i class="fa fa-check"></i><b>9.1.1</b> Barplots</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="ggplot2.html"><a href="ggplot2.html#scales"><i class="fa fa-check"></i><b>9.2</b> Scales</a><ul>
<li class="chapter" data-level="9.2.1" data-path="ggplot2.html"><a href="ggplot2.html#log-axis-with-pretty-tickmarks"><i class="fa fa-check"></i><b>9.2.1</b> Log axis with pretty tickmarks</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="ggplot2.html"><a href="ggplot2.html#themes"><i class="fa fa-check"></i><b>9.3</b> Themes</a></li>
<li class="chapter" data-level="9.4" data-path="ggplot2.html"><a href="ggplot2.html#tips-and-tricks"><i class="fa fa-check"></i><b>9.4</b> Tips and tricks</a><ul>
<li class="chapter" data-level="9.4.1" data-path="ggplot2.html"><a href="ggplot2.html#fixing-labels-that-wont-fit"><i class="fa fa-check"></i><b>9.4.1</b> Fixing labels that won’t fit</a></li>
<li class="chapter" data-level="9.4.2" data-path="ggplot2.html"><a href="ggplot2.html#setting-the-aspect-ratio"><i class="fa fa-check"></i><b>9.4.2</b> Setting the aspect ratio</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="plotly.html"><a href="plotly.html"><i class="fa fa-check"></i><b>10</b> Plotly</a><ul>
<li class="chapter" data-level="10.1" data-path="plotly.html"><a href="plotly.html#using-plotly-with-knitr"><i class="fa fa-check"></i><b>10.1</b> Using plotly with knitr</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="lattice.html"><a href="lattice.html"><i class="fa fa-check"></i><b>11</b> Lattice Graphics</a><ul>
<li class="chapter" data-level="11.1" data-path="lattice.html"><a href="lattice.html#overview-of-lattice-graphics"><i class="fa fa-check"></i><b>11.1</b> Overview of Lattice Graphics</a></li>
<li class="chapter" data-level="11.2" data-path="lattice.html"><a href="lattice.html#introduction-to-model-formulae-and-multi-panel-conditioning"><i class="fa fa-check"></i><b>11.2</b> Introduction to model formulae and multi-panel conditioning</a></li>
<li class="chapter" data-level="11.3" data-path="lattice.html"><a href="lattice.html#barchart"><i class="fa fa-check"></i><b>11.3</b> <code>barchart</code></a></li>
<li class="chapter" data-level="11.4" data-path="lattice.html"><a href="lattice.html#histogram"><i class="fa fa-check"></i><b>11.4</b> histogram</a></li>
<li class="chapter" data-level="11.5" data-path="lattice.html"><a href="lattice.html#interaction-plots-1"><i class="fa fa-check"></i><b>11.5</b> Interaction Plots</a></li>
<li class="chapter" data-level="11.6" data-path="lattice.html"><a href="lattice.html#customizingtrellis"><i class="fa fa-check"></i><b>11.6</b> Customising Lattice Graphics</a><ul>
<li class="chapter" data-level="11.6.1" data-path="lattice.html"><a href="lattice.html#textual-elements"><i class="fa fa-check"></i><b>11.6.1</b> Textual Elements</a></li>
<li class="chapter" data-level="11.6.2" data-path="lattice.html"><a href="lattice.html#log-axis-with-pretty-tickmarks-1"><i class="fa fa-check"></i><b>11.6.2</b> Log axis with pretty tickmarks</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="lattice.html"><a href="lattice.html#trellispanel"><i class="fa fa-check"></i><b>11.7</b> Writing Panel Functions</a><ul>
<li class="chapter" data-level="11.7.1" data-path="lattice.html"><a href="lattice.html#combining-panel-functions"><i class="fa fa-check"></i><b>11.7.1</b> Combining Panel Functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>12</b> Tidyverse</a><ul>
<li class="chapter" data-level="12.1" data-path="tidyverse.html"><a href="tidyverse.html#tibbles"><i class="fa fa-check"></i><b>12.1</b> Tibbles</a></li>
<li class="chapter" data-level="12.2" data-path="tidyverse.html"><a href="tidyverse.html#dplyr"><i class="fa fa-check"></i><b>12.2</b> <code>dplyr</code></a><ul>
<li class="chapter" data-level="12.2.1" data-path="tidyverse.html"><a href="tidyverse.html#group_by-and-summarize"><i class="fa fa-check"></i><b>12.2.1</b> <code>group_by</code> and <code>summarize</code></a></li>
<li class="chapter" data-level="12.2.2" data-path="tidyverse.html"><a href="tidyverse.html#getting-counts-of-cases"><i class="fa fa-check"></i><b>12.2.2</b> Getting counts of cases</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="probability-distribution-functions.html"><a href="probability-distribution-functions.html"><i class="fa fa-check"></i><b>13</b> Probability Distribution Functions</a><ul>
<li class="chapter" data-level="13.1" data-path="probability-distribution-functions.html"><a href="probability-distribution-functions.html#bernoulli"><i class="fa fa-check"></i><b>13.1</b> The Bernoulli distribution</a></li>
<li class="chapter" data-level="13.2" data-path="probability-distribution-functions.html"><a href="probability-distribution-functions.html#binomial"><i class="fa fa-check"></i><b>13.2</b> The binomial distribution</a></li>
<li class="chapter" data-level="13.3" data-path="probability-distribution-functions.html"><a href="probability-distribution-functions.html#normal"><i class="fa fa-check"></i><b>13.3</b> The normal distribution</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html"><i class="fa fa-check"></i><b>14</b> Hypothesis Testing</a><ul>
<li class="chapter" data-level="14.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#chi2-test"><i class="fa fa-check"></i><b>14.1</b> <span class="math inline">\(\chi^2\)</span> test</a><ul>
<li class="chapter" data-level="14.1.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#testing-hypotheses-about-the-distribution-of-a-categorical-variable"><i class="fa fa-check"></i><b>14.1.1</b> Testing Hypotheses about the Distribution of a Categorical Variable</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#students-t-test"><i class="fa fa-check"></i><b>14.2</b> Student’s <em>t</em> test</a><ul>
<li class="chapter" data-level="14.2.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#one-sample-t-test"><i class="fa fa-check"></i><b>14.2.1</b> One sample <em>t</em>-test</a></li>
<li class="chapter" data-level="14.2.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#two-samples-t-test"><i class="fa fa-check"></i><b>14.2.2</b> Two samples t-test</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#the-levene-test-for-homogeneity-of-variances"><i class="fa fa-check"></i><b>14.3</b> The Levene Test for Homogeneity of Variances</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html"><i class="fa fa-check"></i><b>15</b> Correlation and Regression</a><ul>
<li class="chapter" data-level="15.1" data-path="correlation-and-regression.html"><a href="correlation-and-regression.html#linear-regression"><i class="fa fa-check"></i><b>15.1</b> Linear Regression</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="anova.html"><a href="anova.html"><i class="fa fa-check"></i><b>16</b> ANOVA</a><ul>
<li class="chapter" data-level="16.1" data-path="anova.html"><a href="anova.html#one-way-anova"><i class="fa fa-check"></i><b>16.1</b> One-Way ANOVA</a></li>
<li class="chapter" data-level="16.2" data-path="anova.html"><a href="anova.html#repeated-measures-anova"><i class="fa fa-check"></i><b>16.2</b> Repeated Measures ANOVA</a><ul>
<li class="chapter" data-level="16.2.1" data-path="anova.html"><a href="anova.html#one-within-subjects-factor"><i class="fa fa-check"></i><b>16.2.1</b> One Within Subjects Factor</a></li>
<li class="chapter" data-level="16.2.2" data-path="anova.html"><a href="anova.html#two-within-subjects-factors"><i class="fa fa-check"></i><b>16.2.2</b> Two Within Subjects Factors</a></li>
<li class="chapter" data-level="16.2.3" data-path="anova.html"><a href="anova.html#two-within-subjects-factors-and-one-between"><i class="fa fa-check"></i><b>16.2.3</b> Two Within Subjects Factors and One Between</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="adjusting-the-p-values-for-multiple-comparisons.html"><a href="adjusting-the-p-values-for-multiple-comparisons.html"><i class="fa fa-check"></i><b>17</b> Adjusting the <em>p</em>-values for Multiple Comparisons</a></li>
<li class="chapter" data-level="18" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>18</b> R Programming</a><ul>
<li class="chapter" data-level="18.1" data-path="programming.html"><a href="programming.html#contrstruct"><i class="fa fa-check"></i><b>18.1</b> Control Structures</a></li>
<li class="chapter" data-level="18.2" data-path="programming.html"><a href="programming.html#stringprocessing"><i class="fa fa-check"></i><b>18.2</b> String Processing</a><ul>
<li class="chapter" data-level="18.2.1" data-path="programming.html"><a href="programming.html#regexp"><i class="fa fa-check"></i><b>18.2.1</b> Using Regular Expressions</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="programming.html"><a href="programming.html#tips-and-tricks-1"><i class="fa fa-check"></i><b>18.3</b> Tips and Tricks</a><ul>
<li class="chapter" data-level="18.3.1" data-path="programming.html"><a href="programming.html#convert-a-string-into-a-command"><i class="fa fa-check"></i><b>18.3.1</b> Convert a String into a Command</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="programming.html"><a href="programming.html#creatingsimplerpackages"><i class="fa fa-check"></i><b>18.4</b> Creating Simple R Packages</a><ul>
<li class="chapter" data-level="18.4.1" data-path="programming.html"><a href="programming.html#the-bare-minimum-to-create-a-package"><i class="fa fa-check"></i><b>18.4.1</b> The Bare Minimum to Create a Package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="custom.html"><a href="custom.html"><i class="fa fa-check"></i><b>19</b> Environment Customisation</a></li>
<li class="chapter" data-level="20" data-path="ess-using-emacs-speaks-statistics-with-r.html"><a href="ess-using-emacs-speaks-statistics-with-r.html"><i class="fa fa-check"></i><b>20</b> ESS: Using Emacs Speaks Statistics with R</a><ul>
<li class="chapter" data-level="20.1" data-path="ess-using-emacs-speaks-statistics-with-r.html"><a href="ess-using-emacs-speaks-statistics-with-r.html#using-ess-for-editing-and-debugging-r-source-files"><i class="fa fa-check"></i><b>20.1</b> Using ESS for Editing and Debugging R Source Files</a></li>
<li class="chapter" data-level="20.2" data-path="ess-using-emacs-speaks-statistics-with-r.html"><a href="ess-using-emacs-speaks-statistics-with-r.html#using-ess-to-interact-with-a-r-process"><i class="fa fa-check"></i><b>20.2</b> Using ESS to Interact with a R Process</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="using-sweave-to-write-documents-with-r-and-latex.html"><a href="using-sweave-to-write-documents-with-r-and-latex.html"><i class="fa fa-check"></i><b>21</b> Using Sweave to Write Documents with R and LaTeX</a><ul>
<li class="chapter" data-level="21.1" data-path="using-sweave-to-write-documents-with-r-and-latex.html"><a href="using-sweave-to-write-documents-with-r-and-latex.html#whats-sweave"><i class="fa fa-check"></i><b>21.1</b> What’s Sweave?</a></li>
<li class="chapter" data-level="21.2" data-path="using-sweave-to-write-documents-with-r-and-latex.html"><a href="using-sweave-to-write-documents-with-r-and-latex.html#usage"><i class="fa fa-check"></i><b>21.2</b> Usage</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="soundprocessing.html"><a href="soundprocessing.html"><i class="fa fa-check"></i><b>22</b> Sound Processing</a><ul>
<li class="chapter" data-level="22.1" data-path="soundprocessing.html"><a href="soundprocessing.html#libraries-for-sound-analysis-and-signal-processing"><i class="fa fa-check"></i><b>22.1</b> Libraries for Sound Analysis and Signal Processing</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="partial-list-of-packages-by-category.html"><a href="partial-list-of-packages-by-category.html"><i class="fa fa-check"></i><b>A</b> Partial List of Packages by Category</a><ul>
<li class="chapter" data-level="A.1" data-path="partial-list-of-packages-by-category.html"><a href="partial-list-of-packages-by-category.html#graphics-packages"><i class="fa fa-check"></i><b>A.1</b> Graphics Packages</a></li>
<li class="chapter" data-level="A.2" data-path="partial-list-of-packages-by-category.html"><a href="partial-list-of-packages-by-category.html#gui-packages"><i class="fa fa-check"></i><b>A.2</b> GUI Packages</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="miscellaneous-commands.html"><a href="miscellaneous-commands.html"><i class="fa fa-check"></i><b>B</b> Miscellaneous commands</a></li>
<li class="chapter" data-level="C" data-path="other-manuals-and-sources-of-information-on-r.html"><a href="other-manuals-and-sources-of-information-on-r.html"><i class="fa fa-check"></i><b>C</b> Other Manuals and Sources of Information on R</a><ul>
<li class="chapter" data-level="C.0.1" data-path="other-manuals-and-sources-of-information-on-r.html"><a href="other-manuals-and-sources-of-information-on-r.html#in-italian"><i class="fa fa-check"></i><b>C.0.1</b> In Italian</a></li>
<li class="chapter" data-level="C.1" data-path="other-manuals-and-sources-of-information-on-r.html"><a href="other-manuals-and-sources-of-information-on-r.html#other-useful-statistics-resources"><i class="fa fa-check"></i><b>C.1</b> Other useful statistics resources</a><ul>
<li class="chapter" data-level="C.1.1" data-path="other-manuals-and-sources-of-information-on-r.html"><a href="other-manuals-and-sources-of-information-on-r.html#in-italian-1"><i class="fa fa-check"></i><b>C.1.1</b> In Italian</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="D" data-path="fullcoltable.html"><a href="fullcoltable.html"><i class="fa fa-check"></i><b>D</b> Full Colours Table</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A R Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidyverse" class="section level1">
<h1><span class="header-section-number">12</span> Tidyverse</h1>
<p>Tidyverse is a collection of R packages that used in conjuction significantly change the way of working with R.</p>
<p><code>ggplot2</code> and <code>dplyr</code> are probably the most popular packages in <code>tidyverse</code>. When you start using <code>ggplot2</code> it becomes almost essential to use <code>dplyr</code> too because <code>ggplot2</code> is heavily based on dataframes or tibbles as input data. Before covering <code>dplyr</code> we will explain what tibbles are in the next section because <code>dplyr</code> returns tibbles as objects.</p>
<div id="tibbles" class="section level2">
<h2><span class="header-section-number">12.1</span> Tibbles</h2>
<p>Tibbles are a modern take on dataframes (which we introduced in Section <a href="datamanip.html#datamanip">4</a>). Tibbles are in fact very similar to dataframes, but if you’re used to dataframes, there are a few things that may surprise you when you start using tibbles.</p>
<p>Tibbles can be constructed with the <code>tibble</code> function, which is similar to the data.frame function for constructing dataframes:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb365-1" title="1"><span class="kw">library</span>(tibble)</a>
<a class="sourceLine" id="cb365-2" title="2">dat =<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x=</span><span class="kw">rnorm</span>(<span class="dv">20</span>), <span class="dt">y=</span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>), <span class="dt">each=</span><span class="dv">10</span>))</a></code></pre></div>
<p>They can be easily converted to dataframes with the <code>as.data.frame</code> function if needed:</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb366-1" title="1">dat_frame =<span class="st"> </span><span class="kw">as.data.frame</span>(dat)</a></code></pre></div>
<p>and dataframes can also be easily converted to tibbles with the <code>as_tibble</code> function:</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb367-1" title="1">dat2 =<span class="st"> </span><span class="kw">as_tibble</span>(dat_frame)</a></code></pre></div>
<p>One feature of tibbles that may surprise you is the fact that, by default, when you use a print method on a tibble only a limited number of rows and columns are shown. This is for me a very annoying thing, because when I load a dataframe I want to see <strong>all</strong> the columns with the variable names (typically I do this with <code>head(df)</code>). Luckily you can change these defaults by specifying the <code>tibble.print_max</code> and <code>tibble.width</code> options. You can do this in your <code>.Rprofile</code> file in your home directory so that your preference sticks across sessions:</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb368-1" title="1"><span class="co">## This goes in .Rprofile in ~/</span></a>
<a class="sourceLine" id="cb368-2" title="2">.First &lt;-<span class="st"> </span><span class="cf">function</span>(){</a>
<a class="sourceLine" id="cb368-3" title="3">    <span class="kw">.libPaths</span>(<span class="kw">c</span>((<span class="kw">.libPaths</span>()), <span class="st">&quot;~/.R_library/&quot;</span>))</a>
<a class="sourceLine" id="cb368-4" title="4">    <span class="kw">options</span>(<span class="dt">tibble.print_max =</span> <span class="ot">Inf</span>)</a>
<a class="sourceLine" id="cb368-5" title="5">    <span class="kw">options</span>(<span class="dt">tibble.width =</span> <span class="ot">Inf</span>)</a>
<a class="sourceLine" id="cb368-6" title="6">}</a></code></pre></div>
<p>Another aspect of tibbles that may surprise dataframe users is their behavior <em>re</em> subsetting. For example, you might expect that the following returns a vector:</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb369-1" title="1">dat[dat<span class="op">$</span>y<span class="op">==</span><span class="st">&quot;A&quot;</span>, <span class="st">&quot;x&quot;</span>]</a></code></pre></div>
<pre><code>## # A tibble: 10 x 1
##          x
##      &lt;dbl&gt;
##  1  0.268 
##  2  0.342 
##  3  0.878 
##  4 -0.0965
##  5 -1.61  
##  6  0.340 
##  7 -0.0679
##  8  0.402 
##  9  0.418 
## 10 -0.177</code></pre>
<p>but it returns a 1-column tibble instead. Furthermore trying <code>as.numeric(dat[dat$y=="A", "x"])</code> to convert it to a vector doesn’t work. The solution is to use the <code>pull</code> function from <code>dplyr</code>:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb371-1" title="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb371-2" title="2"><span class="kw">pull</span>(dat[dat<span class="op">$</span>y<span class="op">==</span><span class="st">&quot;A&quot;</span>, ], x)</a></code></pre></div>
<pre><code>##  [1]  0.26817819  0.34238976  0.87751953 -0.09650574 -1.61028432  0.34043984
##  [7] -0.06789220  0.40189801  0.41828998 -0.17732134</code></pre>
<p>More succintly, if, for example, you wanted to run a <span class="math inline">\(t\)</span>-test on the groups indicated by the <code>y</code> variable, you could do the following through <code>dplyr</code>:</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb373-1" title="1"><span class="kw">t.test</span>(dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(y<span class="op">==</span><span class="st">&quot;A&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(x),</a>
<a class="sourceLine" id="cb373-2" title="2">       dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(y<span class="op">==</span><span class="st">&quot;B&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(x))</a></code></pre></div>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  dat %&gt;% filter(y == &quot;A&quot;) %&gt;% pull(x) and dat %&gt;% filter(y == &quot;B&quot;) %&gt;% pull(x)
## t = -0.28654, df = 12.676, p-value = 0.7791
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -1.2327599  0.9447016
## sample estimates:
##  mean of x  mean of y 
## 0.06967117 0.21370031</code></pre>
</div>
<div id="dplyr" class="section level2">
<h2><span class="header-section-number">12.2</span> <code>dplyr</code></h2>
<p><code>dplyr</code> is the Swiss army knife of dataframe manipulation. It can be used to take subsets of the rows of a dataframe on the basis of the values of one or more variables (<code>filter</code> function). It can be used to take subsets of the column of a dataframe (<code>select</code> function). It can be used to create new columns that are functions of one or more rows of a dataframe (<code>mutate</code> function). It can be used to create dataframes that summarize variables of another dataframe on the basis of factor groupings (<code>summarize</code> combined with <code>group_by</code> functions). All these operations could be done also without <code>dplyr</code> through base R functions. However, <code>dplyr</code> really shines in making these operations seamless and straightforward, with a concise sintax.</p>
<p>A key element that allows you to seamlessly manipulate dataframes with <code>dplyr</code> with a concise sintax is the pipe operator <code>%&gt;%</code>. This operator comes from the <code>magrittr</code> package that is automaticaly loaded when you lod <code>dplyr</code>. Let’s suppose that we want to take the subset of the <code>iris</code> dataframe consisting of observations for the species setosa, and we’re only interested in the columns for petal length and width. We can do this without using the pipe operator as follows:</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb375-1" title="1">iris_set =<span class="st"> </span><span class="kw">filter</span>(iris, Species<span class="op">==</span><span class="st">&quot;setosa&quot;</span>)</a>
<a class="sourceLine" id="cb375-2" title="2">iris_set =<span class="st"> </span><span class="kw">select</span>(iris_set, Petal.Length, Petal.Width)</a></code></pre></div>
<p>when used without the pipe operator, the first argument that we pass to the <code>filter</code> and <code>select</code> functions is the dataframe on which they need to operate. With the pipe we don’t need to pass this argument to the functions, we simply “pipe” the dataframe through as follows:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb376-1" title="1">iris_set =<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Species<span class="op">==</span><span class="st">&quot;setosa&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Petal.Length, Petal.Width)</a></code></pre></div>
<p>this way we’ve “chained” two operations and accomplised our aim with a single, less verbose, line of code! You can think of the <code>%&gt;%</code> operator as taking the output of the function on its left and passing it forward to the function on its right for further processing.</p>
<div id="group_by-and-summarize" class="section level3">
<h3><span class="header-section-number">12.2.1</span> <code>group_by</code> and <code>summarize</code></h3>
<p>The <code>group_by</code> function generates a “grouped” tibble:</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb377-1" title="1">grIris =<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Species);</a>
<a class="sourceLine" id="cb377-2" title="2"><span class="kw">str</span>(grIris)</a></code></pre></div>
<pre><code>## tibble [150 × 5] (S3: grouped_df/tbl_df/tbl/data.frame)
##  $ Sepal.Length: num [1:150] 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num [1:150] 3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num [1:150] 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num [1:150] 0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  - attr(*, &quot;groups&quot;)= tibble [3 × 2] (S3: tbl_df/tbl/data.frame)
##   ..$ Species: Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 2 3
##   ..$ .rows  :List of 3
##   .. ..$ : int [1:50] 1 2 3 4 5 6 7 8 9 10 ...
##   .. ..$ : int [1:50] 51 52 53 54 55 56 57 58 59 60 ...
##   .. ..$ : int [1:50] 101 102 103 104 105 106 107 108 109 110 ...
##   ..- attr(*, &quot;.drop&quot;)= logi TRUE</code></pre>
<p>this is useful because subsequent functions in the pipeline operate on the groups defined with <code>group_by</code>. For example, the following lines will compute the mean petal length for each species:</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb379-1" title="1">iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Species) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">meanPetLen=</span><span class="kw">mean</span>(Petal.Length))</a></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   Species    meanPetLen
##   &lt;fct&gt;           &lt;dbl&gt;
## 1 setosa           1.46
## 2 versicolor       4.26
## 3 virginica        5.55</code></pre>
<p>note that we can group by more than one variable, and we can compute more than one statistics in the <code>summarize</code> call, as shown in the following example which uses the <code>mpg</code> dataset provided by <code>ggplot2</code>:</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb381-1" title="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb381-2" title="2">mpg <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(manufacturer, trans) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">meanHWY=</span><span class="kw">mean</span>(hwy),</a>
<a class="sourceLine" id="cb381-3" title="3">                                                    <span class="dt">sdHWY=</span><span class="kw">sd</span>(hwy),</a>
<a class="sourceLine" id="cb381-4" title="4">                                                    <span class="dt">meanCTY=</span><span class="kw">mean</span>(cty),</a>
<a class="sourceLine" id="cb381-5" title="5">                                                    <span class="dt">sdCTY=</span><span class="kw">sd</span>(cty))</a></code></pre></div>
<pre><code>## # A tibble: 59 x 6
## # Groups:   manufacturer [15]
##    manufacturer trans      meanHWY  sdHWY meanCTY  sdCTY
##    &lt;chr&gt;        &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
##  1 audi         auto(av)      28.5  2.12     19.5  2.12 
##  2 audi         auto(l5)      25.8  1.92     16    1.22 
##  3 audi         auto(s6)      25    1.63     17.2  1.26 
##  4 audi         manual(m5)    26.5  1.73     18.5  1.73 
##  5 audi         manual(m6)    28    3        18.3  2.89 
##  6 chevrolet    auto(l4)      20.6  5.43     14.7  3.36 
##  7 chevrolet    auto(s6)      25.5  0.707    16    1.41 
##  8 chevrolet    manual(m6)    25.3  1.15     15.7  0.577
##  9 dodge        auto(l3)      24   NA        18   NA    
## 10 dodge        auto(l4)      19    3.58     13.7  2.47 
## 11 dodge        auto(l5)      16.1  2.74     12.1  2.02 
## 12 dodge        auto(l6)      23    0        16    0    
## 13 dodge        manual(m5)    16.7  0.577    12    1.73 
## 14 dodge        manual(m6)    15.8  2.87     12    2.45 
## 15 ford         auto(l4)      17.9  2.92     13.2  2.15 
## 16 ford         auto(l5)      19.8  3.11     14.4  1.14 
## 17 ford         auto(l6)      18.5  0.707    12.5  0.707
## 18 ford         manual(m5)    21.3  4.07     15.3  1.70 
## 19 ford         manual(m6)    20   NA        14   NA    
## 20 honda        auto(l4)      32    0        24    0    
## 21 honda        auto(l5)      36    0        24.5  0.707
## 22 honda        manual(m5)    32    2.16     25.5  2.08 
## 23 honda        manual(m6)    29   NA        21   NA    
## 24 hyundai      auto(l4)      26.5  1.97     18.8  1.47 
## 25 hyundai      auto(l5)      28   NA        19   NA    
## 26 hyundai      manual(m5)    27.5  2.43     18.8  1.47 
## 27 hyundai      manual(m6)    24   NA        16   NA    
## 28 jeep         auto(l4)      18.5  2.12     14.5  0.707
## 29 jeep         auto(l5)      17.3  3.67     13.2  2.86 
## 30 land rover   auto(l4)      15    0        11    0    
## 31 land rover   auto(s6)      18    0        12    0    
## 32 lincoln      auto(l4)      16.5  0.707    11    0    
## 33 lincoln      auto(l6)      18   NA        12   NA    
## 34 mercury      auto(l4)      17   NA        13   NA    
## 35 mercury      auto(l5)      18    1.41     13.5  0.707
## 36 mercury      auto(l6)      19   NA        13   NA    
## 37 nissan       auto(av)      27.3  3.21     20.3  2.31 
## 38 nissan       auto(l4)      23.3  5.51     17    2.65 
## 39 nissan       auto(l5)      20   NA        14   NA    
## 40 nissan       auto(s5)      18   NA        12   NA    
## 41 nissan       manual(m5)    23.7  6.11     18.3  3.06 
## 42 nissan       manual(m6)    29.5  3.54     21    2.83 
## 43 pontiac      auto(l4)      26.8  0.957    17.2  0.957
## 44 pontiac      auto(s4)      25   NA        16   NA    
## 45 subaru       auto(l4)      25    1.41     19.2  1.30 
## 46 subaru       auto(s4)      26    1.41     20    0    
## 47 subaru       manual(m5)    25.9  0.900    19.1  0.690
## 48 toyota       auto(l3)      30   NA        24   NA    
## 49 toyota       auto(l4)      24.3  6.25     18.3  4.38 
## 50 toyota       auto(l5)      22    6.16     16.8  2.99 
## 51 toyota       auto(s5)      29    2.83     20    2.83 
## 52 toyota       auto(s6)      23    7.07     16    4.24 
## 53 toyota       manual(m5)    26.2  6.58     19.3  4.23 
## 54 toyota       manual(m6)    18   NA        15   NA    
## 55 volkswagen   auto(l4)      28.4  7.16     20.4  4.98 
## 56 volkswagen   auto(l5)      27.5  2.12     17    1.41 
## 57 volkswagen   auto(s6)      28.3  1.21     20.2  1.94 
## 58 volkswagen   manual(m5)    30.5  6.98     22.3  6.03 
## 59 volkswagen   manual(m6)    29    0        21    0</code></pre>
</div>
<div id="getting-counts-of-cases" class="section level3">
<h3><span class="header-section-number">12.2.2</span> Getting counts of cases</h3>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb383-1" title="1">y =<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dt">mean=</span><span class="dv">100</span>, <span class="dt">sd=</span><span class="dv">20</span>)</a>
<a class="sourceLine" id="cb383-2" title="2">fct =<span class="st"> </span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>), <span class="dt">each=</span><span class="dv">25</span>)</a>
<a class="sourceLine" id="cb383-3" title="3">dat =<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">fct=</span>fct, <span class="dt">y=</span>y)</a>
<a class="sourceLine" id="cb383-4" title="4">dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(fct) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(y<span class="op">&gt;</span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="kw">n</span>())</a></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   fct   `n()`
##   &lt;chr&gt; &lt;int&gt;
## 1 A        13
## 2 B        12
## 3 C        18
## 4 D        11</code></pre>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb385-1" title="1"><span class="co">## shorthand version</span></a>
<a class="sourceLine" id="cb385-2" title="2">dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(y<span class="op">&gt;</span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(fct)</a></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   fct       n
##   &lt;chr&gt; &lt;int&gt;
## 1 A        13
## 2 B        12
## 3 C        18
## 4 D        11</code></pre>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb387-1" title="1"><span class="co">## alternative version</span></a>
<a class="sourceLine" id="cb387-2" title="2">dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(fct) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(y<span class="op">&gt;</span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tally</span>()</a></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   fct       n
##   &lt;chr&gt; &lt;int&gt;
## 1 A        13
## 2 B        12
## 3 C        18
## 4 D        11</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lattice.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="probability-distribution-functions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/sam81/rguide/edit/master/12_tidyverse.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["rguide.pdf", "rguide.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
